"use strict";(self.webpackChunksalary_management_frontend=self.webpackChunksalary_management_frontend||[]).push([[602],{1602:(e,a,l)=>{l.r(a),l.d(a,{default:()=>o});var n=l(9379),t=l(5043),s=l(9722),r=l(3216),i=l(579);function o(){var e,a,l,o,d,c,u,m,h,v,p,y,b,x,g,j,f,S,w,A,D,N,C,F,I,k,P,L,T,E,M,O,R,W;const[z,B]=(0,t.useState)({name:"",designation:"",department:"",role:"",salaryDate:"",days:null,basicSalary:null,hra:null,dearnessAllowance:null,conveyanceAllowance:null,specialAllowance:null,leads:null,performanceIncentive:null,perCall:null,areaAllowance:null,os:null,roadshow:null,review:null,dresscode:null,attendanceAllowance:null,arrears:null,bonus:null,professionalTax:null,advance:null,loanDeduction:null,salesDebits:null,underPerformance:null,otherAllowance:null,otherDeduction:null,grossSalary:null,totalDeduction:null,netSalary:null}),J=e=>null==e?0:e,[Y,_]=(0,t.useState)([]),[U,G]=(0,t.useState)({});(0,t.useEffect)(()=>{try{const e=localStorage.getItem("customBoxes");if(e){const a=JSON.parse(e),l=Array.isArray(a)?a.map(e=>({id:e.id,label:e.label,category:e.category||"Earnings"})):[];_(l)}}catch(e){}},[]),(0,t.useEffect)(()=>{},[Y]);const H=function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:U;const l=J(e.days),t=(J(e.basicSalary)+J(e.hra)+J(e.dearnessAllowance)+J(e.specialAllowance))*(l/30),s=J(e.conveyanceAllowance)+J(e.performanceIncentive)+J(e.perCall)+J(e.attendanceAllowance),r=(Y||[]).filter(e=>"Earnings"===e.category).reduce((e,l)=>e+J(a[l.label]),0),i=J(e.leads)+J(e.areaAllowance)+J(e.os)+J(e.roadshow)+J(e.review)+J(e.dresscode)+J(e.arrears)+J(e.bonus)+r,o=t+s+i,d=.05*o,c=(Y||[]).filter(e=>"Deductions"===e.category).reduce((e,l)=>e+J(a[l.label]),0),u=J(e.advance)+J(e.salesDebits)+J(e.underPerformance)+c,m=d+J(e.incomeTax)+J(e.providentFund)+J(e.loanDeduction)+u,h=o-m;return(0,n.A)((0,n.A)({},e),{},{otherAllowance:i,otherDeduction:u,grossSalary:o,professionalTax:d,totalDeduction:m,netSalary:h})},q=e=>{const{name:a,value:l}=e.target,t=!["name","designation","department","role","salaryDate"].includes(a),s=(0,n.A)((0,n.A)({},z),{},{[a]:t?""===l?null:parseFloat(l):l});B(H(s))},K=(e,a)=>{const l=Y.find(a=>a.label===e);let t=a;l&&("Earnings"===l.category||"Deductions"===l.category)&&(t=""===a?0:parseFloat(a));const s=(0,n.A)((0,n.A)({},U),{},{[e]:t});G(s),B(e=>H(e,s))},[Z,$]=(0,t.useState)([]);(0,t.useEffect)(()=>{s.A.get("/api/employee-masters").then(e=>$(e.data||[])).catch(()=>$([]))},[]);const[Q,V]=(0,t.useState)(!1),[X,ee]=(0,t.useState)(null),[ae,le]=(0,t.useState)(null),[ne,te]=(0,t.useState)(null),[se,re]=(0,t.useState)(0),ie=(0,r.Zp)(),oe=(0,r.zy)();(0,t.useEffect)(()=>{const e=new URLSearchParams(oe.search).get("month");let a=(()=>{const e=new Date,a=e.getFullYear(),l=String(e.getMonth()+1).padStart(2,"0");return"".concat(a,"-").concat(l,"-01")})();e&&/^\d{4}-\d{2}$/.test(e)&&(a="".concat(e,"-01")),B(e=>(0,n.A)((0,n.A)({},e),{},{salaryDate:e.salaryDate||a}))},[oe.search]);const de=async e=>{if(e.preventDefault(),Q)return;const a="".concat(String(z.employeeId||""),"|").concat(String((z.salaryDate||"").slice(0,7)));if(ne&&ne===a&&Date.now()-se<8e3)return;if(V(!0),ee(null),le(null),null==z.days||z.days<=0)return ee("Days is required and must be greater than 0"),Ie(!0),void V(!1);if(!z.employeeId||""===String(z.employeeId).trim())return ee("Please select employee from list"),Ie(!0),void V(!1);{const e=new Date(z.salaryDate||new Date),l=e.getFullYear(),n=e.getMonth()+1;try{if((await s.A.get("/api/employees/exists?employeeId=".concat(encodeURIComponent(z.employeeId),"&year=").concat(l,"&month=").concat(n))).data.exists)return ne&&ne===a&&Date.now()-se<8e3||(ee("The salary for the same employee name has already been recorded for this month. Kindly verify the Employee ID"),Ie(!0)),void V(!1)}catch(d){console.error("Duplicate check failed",d)}}const l=Y.map(e=>({label:e.label,category:e.category,value:U[e.label]})).filter(e=>void 0!==e.value&&null!==e.value&&""!==e.value&&0!==e.value),n=l.filter(e=>"Earnings"===e.category).reduce((e,a)=>e+(parseFloat(a.value)||0),0),t=l.filter(e=>"Deductions"===e.category).reduce((e,a)=>e+(parseFloat(a.value)||0),0),r={name:z.name,designation:z.designation,department:z.department,role:z.role,salaryDate:z.salaryDate,employeeId:z.employeeId,days:z.days,basicSalary:z.basicSalary,hra:z.hra,dearnessAllowance:z.dearnessAllowance,conveyanceAllowance:z.conveyanceAllowance,specialAllowance:z.specialAllowance,leads:z.leads,performanceIncentive:z.performanceIncentive,perCall:z.perCall,areaAllowance:z.areaAllowance,os:z.os,roadshow:z.roadshow,review:z.review,dresscode:z.dresscode,attendanceAllowance:z.attendanceAllowance,arrears:z.arrears,bonus:z.bonus,professionalTax:z.professionalTax,incomeTax:z.incomeTax,providentFund:z.providentFund,advance:z.advance,loanDeduction:z.loanDeduction,salesDebits:z.salesDebits,underPerformance:z.underPerformance,otherAllowance:z.otherAllowance,otherDeduction:z.otherDeduction,grossSalary:z.grossSalary,totalDeduction:z.totalDeduction,netSalary:z.netSalary,customFields:JSON.stringify(l),customAllowanceAmount:n,customDeductionAmount:t};try{await s.A.post("/api/employees",r,{headers:{"Content-Type":"application/json",Accept:"application/json"}}),le("Saved successfully"),setTimeout(()=>le(null),3e3),te(a),re(Date.now())}catch(d){var i,o;ee((null===d||void 0===d||null===(i=d.response)||void 0===i||null===(o=i.data)||void 0===o?void 0:o.message)||d.message),Ie(!0)}finally{V(!1)}},[ce,ue]=(0,t.useState)(""),[me,he]=(0,t.useState)({totalLeave:0,totalPermission:0,permittedLeave:0,absentDays:0}),[ve,pe]=(0,t.useState)(""),[ye,be]=(0,t.useState)(!1),[xe,ge]=(0,t.useState)(!1),[je,fe]=(0,t.useState)(!1),[Se,we]=(0,t.useState)(!1),[Ae,De]=(0,t.useState)(!1),[Ne,Ce]=(0,t.useState)(!1),[Fe,Ie]=(0,t.useState)(!1),[ke,Pe]=(0,t.useState)("Employee"),Le=["January","February","March","April","May","June","July","August","September","October","November","December"],Te=new Date,Ee=Te.getFullYear(),Me=Array.from({length:11},(e,a)=>Ee-5+a),[Oe,Re]=(0,t.useState)(!1),We=(0,t.useCallback)((e,a)=>{if(!e||!a)return 0;const l=new Date(e),n=l.getFullYear(),t=l.getMonth(),[s,r]=a.split("-"),i=12*(parseInt(s,10)-n)+(parseInt(r,10)-1-t);if(i<12)return 0;return 1===Math.floor(i/12)?1:2},[]);return(0,t.useEffect)(()=>{const e=ve||(z.salaryDate?z.salaryDate.slice(0,7):null),a=We(ce,e),l=Oe?me.permittedLeave||0:a,t=me.totalLeave||0,s=Math.min(t,l),r=l-s,i=Math.max(t-l,0),o=me.totalPermission||0,d=o>2?.5*(o-2):0,c=i+Math.max(d-r,0),u=Math.max(30-c,0);he(e=>(0,n.A)((0,n.A)({},e),{},{permittedLeave:l,absentDays:c})),B(e=>(0,n.A)((0,n.A)({},e),{},{days:u}))},[ce,ve,me.totalLeave,me.totalPermission,Oe,me.permittedLeave,We]),(0,i.jsxs)("div",{className:"page add-salary",children:[ae&&(0,i.jsx)("div",{style:{position:"fixed",right:16,bottom:16,zIndex:9999},children:(0,i.jsx)("div",{style:{background:"#198754",color:"#fff",padding:"10px 14px",borderRadius:8,boxShadow:"0 2px 10px rgba(0,0,0,0.2)"},children:ae})}),Fe&&(0,i.jsx)("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.4)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:(0,i.jsxs)("div",{style:{background:"#fff",borderRadius:8,padding:16,width:"90%",maxWidth:420},children:[(0,i.jsx)("div",{style:{color:"#dc3545",marginBottom:12},children:X}),(0,i.jsx)("div",{className:"btn-container btn-right",children:(0,i.jsx)("button",{type:"button",className:"btn btn-secondary btn-rounded",onClick:()=>Ie(!1),children:"Close"})})]})}),(0,i.jsxs)("div",{className:"panel",style:xe?{maxWidth:1100}:{maxWidth:700},children:[Q&&(0,i.jsx)("div",{children:"Saving..."}),X&&(0,i.jsx)("div",{style:{color:"red"},children:X}),(0,i.jsxs)("form",{onSubmit:de,children:[(0,i.jsxs)("div",{className:"header-bar",style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:16,marginBottom:16},children:[(0,i.jsx)("h2",{className:"section-title",style:{margin:0},children:"Add Salary Details"}),(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:12},children:[(()=>{const e=(ve||"".concat(Ee,"-").concat(String(Te.getMonth()+1).padStart(2,"0"))).split("-"),a=parseInt(e[0],10),l=parseInt(e[1],10);return(0,i.jsxs)("div",{style:{display:"flex",gap:8},children:[(0,i.jsx)("select",{"aria-label":"Select Month",value:l,onChange:e=>{const l=parseInt(e.target.value,10);pe("".concat(String(a||Ee),"-").concat(String(l).padStart(2,"0")))},children:Le.map((e,a)=>(0,i.jsx)("option",{value:a+1,children:e},e))}),(0,i.jsx)("select",{"aria-label":"Select Year",value:a,onChange:e=>{const a=parseInt(e.target.value,10),n=l||Te.getMonth()+1;pe("".concat(String(a),"-").concat(String(n).padStart(2,"0")))},children:Me.map(e=>(0,i.jsx)("option",{value:e,children:e},e))})]})})(),(0,i.jsx)("div",{children:(0,i.jsxs)("select",{"aria-label":"Select Employee",value:null!==(e=z.employeeId)&&void 0!==e?e:"",onChange:e=>{var a,l,t,s,r;const i=e.target.value||null,o=Z.find(e=>e.employeeId===i),d=null===o||void 0===o?void 0:o.basicSalary,c="number"===typeof d&&!Number.isNaN(d)&&d>0,u=(0,n.A)((0,n.A)({},z),{},{employeeId:null!==(a=null===o||void 0===o?void 0:o.employeeId)&&void 0!==a?a:null,name:null!==(l=null===o||void 0===o?void 0:o.name)&&void 0!==l?l:"",designation:null!==(t=null===o||void 0===o?void 0:o.designation)&&void 0!==t?t:z.designation,basicSalary:c?parseFloat((.4*d).toFixed(2)):null!==(s=null===o||void 0===o?void 0:o.basicSalary)&&void 0!==s?s:z.basicSalary,dearnessAllowance:c?parseFloat((.3*d).toFixed(2)):z.dearnessAllowance,hra:c?parseFloat((.3*d).toFixed(2)):z.hra});B(H(u)),ue(null!==(r=null===o||void 0===o?void 0:o.joinDate)&&void 0!==r?r:"")},children:[(0,i.jsx)("option",{value:"",children:"Select employee"}),Z.map(e=>(0,i.jsx)("option",{value:e.employeeId,children:e.name},e.id))]})})]}),(0,i.jsx)("div",{children:(0,i.jsx)("button",{type:"button",className:"btn btn-primary btn-rounded",onClick:()=>ge(!0),children:"Start Salary Entry"})})]}),xe&&(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("div",{style:{display:"flex",gap:24},children:[(0,i.jsx)("div",{className:"sidebar-nav",style:{width:220,borderRight:"1px solid #e5e7eb"},children:[{key:"Employee",label:"Earnings",icon:"\ud83d\udc64"},{key:"Earnings",label:"Allowances",icon:"\ud83d\udcb0"},{key:"Deductions",label:"Deductions",icon:"\ud83e\uddfe"},{key:"Summary",label:"Summary",icon:"\ud83d\udcca"}].map(e=>(0,i.jsxs)("button",{type:"button",onClick:()=>Pe(e.key),className:"btn",style:{display:"flex",alignItems:"center",gap:8,width:"100%",justifyContent:"flex-start",background:"transparent",border:"none",padding:"10px 8px",color:ke===e.key?"#0d6efd":"#374151",fontWeight:ke===e.key?700:500,cursor:"pointer"},children:[(0,i.jsx)("span",{"aria-hidden":!0,children:e.icon}),e.label]},e.key))}),(0,i.jsxs)("div",{style:{flex:1},children:["Employee"===ke&&(0,i.jsxs)("div",{className:"form-grid",children:[(0,i.jsxs)("div",{className:"form-item",children:[(0,i.jsx)("label",{htmlFor:"designation",children:"Designation"}),(0,i.jsx)("input",{id:"designation",name:"designation",type:"text",value:null!==(a=z.designation)&&void 0!==a?a:"",onChange:q})]}),(0,i.jsxs)("div",{className:"form-item",children:[(0,i.jsx)("label",{htmlFor:"basicSalary",children:"Basic salary"}),(0,i.jsx)("input",{id:"basicSalary",name:"basicSalary",type:"number",value:null!==(l=z.basicSalary)&&void 0!==l?l:"",onChange:q})]}),(0,i.jsxs)("div",{className:"form-item",children:[(0,i.jsx)("label",{htmlFor:"specialAllowance",children:"Special allowance"}),(0,i.jsx)("input",{id:"specialAllowance",name:"specialAllowance",type:"number",value:null!==(o=z.specialAllowance)&&void 0!==o?o:"",onChange:q})]}),(0,i.jsxs)("div",{className:"form-item",children:[(0,i.jsx)("label",{htmlFor:"hra",children:"House Rent Allowance"}),(0,i.jsx)("input",{id:"hra",name:"hra",type:"number",value:null!==(d=z.hra)&&void 0!==d?d:"",onChange:q})]}),(0,i.jsxs)("div",{className:"form-item",children:[(0,i.jsx)("label",{htmlFor:"dearnessAllowance",children:"Dearness Allowance"}),(0,i.jsx)("input",{id:"dearnessAllowance",name:"dearnessAllowance",type:"number",value:null!==(c=z.dearnessAllowance)&&void 0!==c?c:"",onChange:q})]}),Y.filter(e=>"Employee"===e.category).map(e=>{var a;return(0,i.jsxs)("div",{className:"form-item",children:[(0,i.jsx)("label",{children:e.label}),(0,i.jsx)("input",{type:"text",value:null!==(a=U[e.label])&&void 0!==a?a:"",onChange:a=>K(e.label,a.target.value)})]},e.id)})]}),"Earnings"===ke&&(0,i.jsxs)("div",{className:"form-grid",children:[(0,i.jsxs)("div",{className:"form-item",children:[(0,i.jsx)("label",{htmlFor:"attendanceAllowance",children:"Attendance allowance"}),(0,i.jsx)("input",{id:"attendanceAllowance",name:"attendanceAllowance",type:"number",value:null!==(u=z.attendanceAllowance)&&void 0!==u?u:"",onChange:q})]}),(0,i.jsxs)("div",{className:"form-item",children:[(0,i.jsx)("label",{htmlFor:"areaAllowance",children:"Area allowance"}),(0,i.jsx)("input",{id:"areaAllowance",name:"areaAllowance",type:"number",value:null!==(m=z.areaAllowance)&&void 0!==m?m:"",onChange:q})]}),(0,i.jsxs)("div",{className:"form-item",children:[(0,i.jsx)("label",{htmlFor:"dresscode",children:"Dresscode"}),(0,i.jsx)("input",{id:"dresscode",name:"dresscode",type:"number",value:null!==(h=z.dresscode)&&void 0!==h?h:"",onChange:q})]}),(0,i.jsxs)("div",{className:"form-item",children:[(0,i.jsx)("label",{htmlFor:"os",children:"OS"}),(0,i.jsx)("input",{id:"os",name:"os",type:"number",value:null!==(v=z.os)&&void 0!==v?v:"",onChange:q})]}),(0,i.jsxs)("div",{className:"form-item",children:[(0,i.jsx)("label",{htmlFor:"performanceIncentive",children:"Sales incentive"}),(0,i.jsx)("input",{id:"performanceIncentive",name:"performanceIncentive",type:"number",value:null!==(p=z.performanceIncentive)&&void 0!==p?p:"",onChange:q})]}),(0,i.jsxs)("div",{className:"form-item",children:[(0,i.jsx)("label",{htmlFor:"review",children:"Review"}),(0,i.jsx)("input",{id:"review",name:"review",type:"number",value:null!==(y=z.review)&&void 0!==y?y:"",onChange:q})]}),(0,i.jsxs)("div",{className:"form-item",children:[(0,i.jsx)("label",{htmlFor:"roadshow",children:"Roadshow promo"}),(0,i.jsx)("input",{id:"roadshow",name:"roadshow",type:"number",value:null!==(b=z.roadshow)&&void 0!==b?b:"",onChange:q})]}),(0,i.jsxs)("div",{className:"form-item",children:[(0,i.jsx)("label",{htmlFor:"perCall",children:"Per-call inc"}),(0,i.jsx)("input",{id:"perCall",name:"perCall",type:"number",value:null!==(x=z.perCall)&&void 0!==x?x:"",onChange:q})]}),(0,i.jsxs)("div",{className:"form-item",children:[(0,i.jsx)("label",{htmlFor:"arrears",children:"Arrears"}),(0,i.jsx)("input",{id:"arrears",name:"arrears",type:"number",value:null!==(g=z.arrears)&&void 0!==g?g:"",onChange:q})]}),(0,i.jsxs)("div",{className:"form-item",children:[(0,i.jsx)("label",{htmlFor:"bonus",children:"Bonus"}),(0,i.jsx)("input",{id:"bonus",name:"bonus",type:"number",value:null!==(j=z.bonus)&&void 0!==j?j:"",onChange:q})]}),Y.filter(e=>"Earnings"===e.category).map(e=>{var a;return(0,i.jsxs)("div",{className:"form-item",children:[(0,i.jsxs)("label",{children:[e.label," ",(0,i.jsx)("button",{type:"button",style:{fontSize:"0.7em",color:"red",border:"none",background:"none"},onClick:()=>{_(a=>a.filter(a=>a.id!==e.id));const a=(0,n.A)({},U);delete a[e.label],G(a),B(e=>H(e,a))},children:"(x)"})]}),(0,i.jsx)("input",{type:"number",value:null!==(a=U[e.label])&&void 0!==a?a:"",onChange:a=>K(e.label,a.target.value)})]},e.id)}),(0,i.jsxs)("div",{className:"form-item",children:[(0,i.jsx)("label",{children:"Other allowance"}),(0,i.jsx)("input",{type:"number",readOnly:!0,"aria-readonly":"true",value:null!==(f=null===(S=z.otherAllowance)||void 0===S?void 0:S.toFixed(2))&&void 0!==f?f:"0.00",style:{background:"#f3f4f6",color:"#6b7280"}})]})]}),"Deductions"===ke&&(0,i.jsxs)("div",{className:"form-grid",children:[(0,i.jsxs)("div",{className:"form-item",children:[(0,i.jsx)("label",{htmlFor:"advance",children:"Advance"}),(0,i.jsx)("input",{id:"advance",name:"advance",type:"number",value:null!==(w=z.advance)&&void 0!==w?w:"",onChange:q})]}),(0,i.jsxs)("div",{className:"form-item",children:[(0,i.jsx)("label",{htmlFor:"loanDeduction",children:"Loan Deduction"}),(0,i.jsx)("input",{id:"loanDeduction",name:"loanDeduction",type:"number",value:null!==(A=z.loanDeduction)&&void 0!==A?A:"",onChange:q})]}),(0,i.jsxs)("div",{className:"form-item",children:[(0,i.jsx)("label",{htmlFor:"professionalTax",children:"Professional Tax"}),(0,i.jsx)("input",{id:"professionalTax",name:"professionalTax",type:"number",value:null!==(D=z.professionalTax)&&void 0!==D?D:"",onChange:q})]}),(0,i.jsxs)("div",{className:"form-item",children:[(0,i.jsx)("label",{htmlFor:"underPerformance",children:"Under Performance"}),(0,i.jsx)("input",{id:"underPerformance",name:"underPerformance",type:"number",value:null!==(N=z.underPerformance)&&void 0!==N?N:"",onChange:q})]}),(0,i.jsxs)("div",{className:"form-item",children:[(0,i.jsx)("label",{htmlFor:"salesDebits",children:"Sales Debits"}),(0,i.jsx)("input",{id:"salesDebits",name:"salesDebits",type:"number",value:null!==(C=z.salesDebits)&&void 0!==C?C:"",onChange:q})]}),Y.filter(e=>"Deductions"===e.category).map(e=>{var a;return(0,i.jsxs)("div",{className:"form-item",children:[(0,i.jsx)("label",{children:e.label}),(0,i.jsx)("input",{type:"number",value:null!==(a=U[e.label])&&void 0!==a?a:"",onChange:a=>K(e.label,a.target.value)})]},e.id)}),(0,i.jsxs)("div",{className:"form-item",children:[(0,i.jsx)("label",{children:"Other deduction"}),(0,i.jsx)("input",{type:"number",readOnly:!0,"aria-readonly":"true",value:null!==(F=null===(I=z.otherDeduction)||void 0===I?void 0:I.toFixed(2))&&void 0!==F?F:"0.00",style:{background:"#f3f4f6",color:"#6b7280"}})]})]}),"Summary"===ke&&(0,i.jsxs)("div",{className:"form-grid",children:[(0,i.jsxs)("div",{className:"form-item",children:[(0,i.jsx)("label",{htmlFor:"days",children:"Days worked"}),(0,i.jsx)("input",{id:"days",name:"days",type:"number",value:null!==(k=z.days)&&void 0!==k?k:"",readOnly:!0,"aria-readonly":"true",style:{background:"#f3f4f6",color:"#6b7280"}})]}),(0,i.jsxs)("div",{className:"form-item",children:[(0,i.jsx)("label",{children:"Gross salary"}),(0,i.jsx)("input",{type:"number",readOnly:!0,"aria-readonly":"true",value:null!==(P=null===(L=z.grossSalary)||void 0===L?void 0:L.toFixed(2))&&void 0!==P?P:"0.00",style:{background:"#f3f4f6",color:"#6b7280"}})]}),(0,i.jsxs)("div",{className:"form-item",children:[(0,i.jsx)("label",{children:"Total deductions"}),(0,i.jsx)("input",{type:"number",readOnly:!0,"aria-readonly":"true",value:null!==(T=null===(E=z.totalDeduction)||void 0===E?void 0:E.toFixed(2))&&void 0!==T?T:"0.00",style:{background:"#f3f4f6",color:"#6b7280"}})]}),(0,i.jsxs)("div",{className:"form-item",children:[(0,i.jsx)("label",{children:"Net salary"}),(0,i.jsx)("input",{type:"number",readOnly:!0,"aria-readonly":"true",value:null!==(M=null===(O=z.netSalary)||void 0===O?void 0:O.toFixed(2))&&void 0!==M?M:"0.00",style:{background:"#f3f4f6",color:"#6b7280"}})]}),(0,i.jsxs)("div",{className:"form-item",children:[(0,i.jsx)("label",{htmlFor:"salaryDate",children:"Salary Date"}),(0,i.jsx)("input",{id:"salaryDate",name:"salaryDate",type:"date",value:null!==(R=z.salaryDate)&&void 0!==R?R:"",onChange:q})]}),Y.filter(e=>"Summary"===e.category).map(e=>{var a;return(0,i.jsxs)("div",{className:"form-item",children:[(0,i.jsxs)("label",{children:[e.label," ",(0,i.jsx)("button",{type:"button",style:{fontSize:"0.7em",color:"red",border:"none",background:"none"},onClick:()=>{_(a=>a.filter(a=>a.id!==e.id));const a=(0,n.A)({},U);delete a[e.label],G(a),B(e=>H(e,a))},children:"(x)"})]}),(0,i.jsx)("input",{type:"text",value:null!==(a=U[e.label])&&void 0!==a?a:"",onChange:a=>K(e.label,a.target.value)})]},e.id)})]})]}),(0,i.jsx)("div",{style:{width:300},children:(0,i.jsxs)("div",{className:"summary-card",style:{border:"1px solid #e5e7eb",borderRadius:8,padding:16},children:[(0,i.jsx)("div",{style:{fontWeight:700,marginBottom:8},children:"Attendance Summary"}),!z.days||z.days<=0?(0,i.jsxs)("div",{style:{background:"#f9fafb",border:"1px dashed #d1d5db",borderRadius:8,padding:12,color:"#6b7280"},children:["No Attendance Data",(0,i.jsx)("div",{style:{marginTop:4},children:"Please provide attendance details to calculate live salary values."})]}):(0,i.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{style:{color:"#6b7280"},children:"Leave"}),(0,i.jsx)("div",{style:{fontWeight:600},children:J(me.totalLeave)})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{style:{color:"#6b7280"},children:"Permission"}),(0,i.jsx)("div",{style:{fontWeight:600},children:J(me.totalPermission)})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{style:{color:"#6b7280"},children:"Permitted"}),(0,i.jsx)("div",{style:{fontWeight:600},children:J(me.permittedLeave)})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{style:{color:"#6b7280"},children:"Absent"}),(0,i.jsx)("div",{style:{fontWeight:600},children:J(me.absentDays)})]})]}),(0,i.jsx)("div",{style:{marginTop:12},children:(0,i.jsx)("button",{type:"button",className:"btn btn-outline-primary btn-rounded",onClick:()=>fe(!0),children:"Edit Attendance"})})]})})]})}),ye&&!xe&&(0,i.jsx)("div",{className:"btn-container btn-center",children:(0,i.jsx)("button",{type:"button",className:"btn btn-primary btn-rounded",onClick:()=>{if(!z.employeeId||""===String(z.employeeId).trim())return ee("Please select employee from list"),void Ie(!0);ee(null),Ie(!1),ge(!0)},children:"Enter Salary"})}),xe&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:16,margin:"16px 0"},children:[(0,i.jsxs)("div",{style:{border:"1px solid #e5e7eb",borderRadius:8,padding:16},children:[(0,i.jsx)("div",{children:"Gross"}),(0,i.jsxs)("div",{style:{fontSize:20,fontWeight:700},children:["\u20b9 ",J(z.grossSalary).toLocaleString()]})]}),(0,i.jsxs)("div",{style:{border:"1px solid #e5e7eb",borderRadius:8,padding:16},children:[(0,i.jsx)("div",{children:"Total deductions"}),(0,i.jsxs)("div",{style:{fontSize:20,fontWeight:700},children:["\u20b9 ",J(z.totalDeduction).toLocaleString()]})]}),(0,i.jsxs)("div",{style:{border:"1px solid #e5e7eb",borderRadius:8,padding:16},children:[(0,i.jsx)("div",{children:"Net"}),(0,i.jsxs)("div",{style:{fontSize:20,fontWeight:700},children:["\u20b9 ",J(z.netSalary).toLocaleString()]})]})]}),(0,i.jsxs)("div",{className:"btn-container btn-center",children:[(0,i.jsx)("button",{type:"button",disabled:Q,className:"btn btn-primary btn-rounded",onClick:de,children:"Save"}),(0,i.jsx)("button",{type:"button",className:"btn btn-outline-secondary btn-rounded",onClick:()=>{G({}),B(e=>H({name:"",designation:"",department:"",role:"",salaryDate:e.salaryDate,employeeId:null,days:null,basicSalary:null,hra:null,dearnessAllowance:null,conveyanceAllowance:null,specialAllowance:null,leads:null,performanceIncentive:null,perCall:null,areaAllowance:null,os:null,roadshow:null,review:null,dresscode:null,attendanceAllowance:null,arrears:null,bonus:null,professionalTax:null,advance:null,loanDeduction:null,salesDebits:null,underPerformance:null})),be(!1),ge(!1),we(!1),De(!1),Ce(!1),fe(!1),ue(""),he({totalLeave:0,totalPermission:0,permittedLeave:0,absentDays:0}),ee(null),Ie(!1),le(null)},children:"Next"}),(0,i.jsx)("button",{type:"button",className:"btn btn-secondary btn-rounded",onClick:()=>ie(-1),children:"Cancel"})]})]})]})]}),je&&(0,i.jsx)("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.4)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:(0,i.jsxs)("div",{style:{background:"#fff",borderRadius:8,padding:16,width:"90%",maxWidth:800,maxHeight:"80vh",overflow:"auto"},children:[(0,i.jsx)("h3",{className:"section-title",children:"Attendance"}),(0,i.jsxs)("div",{className:"form-grid",children:[(0,i.jsxs)("div",{className:"form-item",children:[(0,i.jsx)("label",{htmlFor:"joinDate",children:"Date of Joining"}),(()=>{const e=(ce||"").split("-"),a=e[0]?parseInt(e[0],10):Ee,l=e[1]?parseInt(e[1],10):Te.getMonth()+1,n=e[2]?parseInt(e[2],10):Te.getDate(),t=(e,a)=>new Date(e,a,0).getDate(),s=t(a,l),r=Math.min(n,s),o=Array.from({length:s},(e,a)=>a+1),d=(e,a,l)=>{const n=Math.max(1,Math.min(12,a)),s=Math.min(t(e,n),Math.max(1,l));ue("".concat(String(e),"-").concat(String(n).padStart(2,"0"),"-").concat(String(s).padStart(2,"0")))};return(0,i.jsxs)("div",{style:{display:"flex",gap:8},children:[(0,i.jsx)("select",{value:r,onChange:e=>d(a,l,parseInt(e.target.value,10)),children:o.map(e=>(0,i.jsx)("option",{value:e,children:String(e).padStart(2,"0")},e))}),(0,i.jsx)("select",{value:l,onChange:e=>d(a,parseInt(e.target.value,10),r),children:Le.map((e,a)=>(0,i.jsx)("option",{value:a+1,children:e},e))}),(0,i.jsx)("select",{value:a,onChange:e=>d(parseInt(e.target.value,10),l,r),children:Me.map(e=>(0,i.jsx)("option",{value:e,children:e},e))})]})})()]}),(0,i.jsxs)("div",{className:"form-item",children:[(0,i.jsx)("label",{htmlFor:"totalLeave",children:"Total Leave Days"}),(0,i.jsx)("input",{id:"totalLeave",type:"number",value:me.totalLeave,onChange:e=>he(a=>(0,n.A)((0,n.A)({},a),{},{totalLeave:parseFloat(e.target.value||0)}))})]}),(0,i.jsxs)("div",{className:"form-item",children:[(0,i.jsx)("label",{htmlFor:"permissionCount",children:"Permission/Late Count"}),(0,i.jsx)("input",{id:"permissionCount",type:"number",value:me.totalPermission,onChange:e=>he(a=>(0,n.A)((0,n.A)({},a),{},{totalPermission:parseFloat(e.target.value||0)}))})]}),(0,i.jsxs)("div",{className:"form-item",children:[(0,i.jsx)("label",{children:"Permitted Leave"}),(0,i.jsx)("input",{type:"number",value:me.permittedLeave,onChange:e=>{const a=parseFloat(e.target.value||0);Re(!0),he(e=>(0,n.A)((0,n.A)({},e),{},{permittedLeave:a}))}})]}),(0,i.jsxs)("div",{className:"form-item",children:[(0,i.jsx)("label",{children:"Absent Days (auto)"}),(0,i.jsx)("input",{type:"number",readOnly:!0,"aria-readonly":"true",step:"0.5",value:me.absentDays})]}),(0,i.jsxs)("div",{className:"form-item",children:[(0,i.jsx)("label",{children:"Working Days (auto)"}),(0,i.jsx)("input",{type:"number",readOnly:!0,"aria-readonly":"true",step:"0.5",value:null!==(W=z.days)&&void 0!==W?W:0})]})]}),(0,i.jsxs)("div",{className:"btn-container btn-right",children:[(0,i.jsx)("button",{type:"button",className:"btn btn-primary btn-rounded",onClick:()=>{fe(!1),be(!0)},children:"Save"}),(0,i.jsx)("button",{type:"button",className:"btn btn-secondary btn-rounded",onClick:()=>fe(!1),children:"Cancel"})]})]})})]})}}}]);
//# sourceMappingURL=602.180ed67a.chunk.js.map