{"version":3,"file":"static/js/602.180ed67a.chunk.js","mappings":"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","sources":["components/AddEmployee.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\r\nimport axios from 'axios';\r\nimport { useNavigate, useLocation } from 'react-router-dom';\r\n\r\nexport default function AddEmployee() {\r\n    // In AddEmployee component: initial state and totals calculation\r\n    const [employee, setEmployee] = useState({\r\n        name: '',\r\n        designation: '',\r\n        department: '',\r\n        role: '',\r\n        salaryDate: '',\r\n\r\n        // Inputs (column-wise)\r\n        days: null,\r\n        basicSalary: null,            // Basic\r\n        hra: null,                    // HRA\r\n        dearnessAllowance: null,      // DA (for Basic+HRA+DA)\r\n        conveyanceAllowance: null,    // conveyance\r\n        specialAllowance: null,       // Special allowance\r\n        leads: null,                  // Leads\r\n        performanceIncentive: null,   // salesIncentive\r\n        perCall: null,                // Per-call inc\r\n        areaAllowance: null,          // Area allowance\r\n        os: null,                     // OS\r\n        roadshow: null,               // Roadshow promo\r\n        review: null,                 // Review\r\n        dresscode: null,              // Dresscode\r\n        attendanceAllowance: null,    // Attendance allowance\r\n        arrears: null,                // Arrears\r\n        bonus: null,                  // Bonus\r\n\r\n        // Deductions\r\n        professionalTax: null,        // Ess/16\r\n        // removed: incomeTax\r\n        // removed: providentFund\r\n        advance: null,                // advance/17\r\n        loanDeduction: null,          // LOAN/18\r\n        salesDebits: null,            // salesdebits/19\r\n        underPerformance: null,       // underperfomance/20\r\n\r\n        // Derived + backend fields\r\n        otherAllowance: null,\r\n        otherDeduction: null,\r\n        grossSalary: null,            // Grosspay\r\n        totalDeduction: null,\r\n        netSalary: null               // net\r\n    });\r\n\r\n    const n = (v) => (v == null ? 0 : v);\r\n\r\n    const [customBoxes, setCustomBoxes] = useState([]);\r\n    const [customBoxValues, setCustomBoxValues] = useState({});\r\n\r\n    useEffect(() => {\r\n        try {\r\n            const saved = localStorage.getItem('customBoxes');\r\n            if (saved) {\r\n                const parsed = JSON.parse(saved);\r\n                const normalized = Array.isArray(parsed) ? parsed.map(x => ({ id: x.id, label: x.label, category: x.category || 'Earnings' })) : [];\r\n                setCustomBoxes(normalized);\r\n            }\r\n        } catch {}\r\n    }, []);\r\n\r\n    // Ensure state updates when customBoxes change (e.g. added new one)\r\n    useEffect(() => {\r\n        // If needed, we can force a re-render or check consistency\r\n    }, [customBoxes]);\r\n\r\n    const computeDerived = (s, currentBoxes = customBoxValues) => {\r\n        const days = n(s.days);\r\n        const core =\r\n            n(s.basicSalary) +\r\n            n(s.hra) +\r\n            n(s.dearnessAllowance) +\r\n            n(s.specialAllowance);\r\n\r\n        // Prorated core per your requirement\r\n        const proratedCore = core * (days / 30);\r\n\r\n        // Nonâ€‘prorated earnings\r\n        const nonProrated =\r\n            n(s.conveyanceAllowance) +\r\n            n(s.performanceIncentive) +\r\n            n(s.perCall) +\r\n            n(s.attendanceAllowance);\r\n\r\n        // Aggregate other allowances\r\n        const extraEarn = (customBoxes || []).filter(cb => cb.category === 'Earnings').reduce((acc, cb) => acc + n(currentBoxes[cb.label]), 0);\r\n        const otherAllowance =\r\n            n(s.leads) +\r\n            n(s.areaAllowance) +\r\n            n(s.os) +\r\n            n(s.roadshow) +\r\n            n(s.review) +\r\n            n(s.dresscode) +\r\n            n(s.arrears) +\r\n            n(s.bonus) +\r\n            extraEarn;\r\n\r\n        const grossSalary = proratedCore + nonProrated + otherAllowance;\r\n\r\n        // NEW: ESS as 5% of gross; store in professionalTax\r\n        const professionalTax = grossSalary * 0.05;\r\n\r\n        const extraDed = (customBoxes || []).filter(cb => cb.category === 'Deductions').reduce((acc, cb) => acc + n(currentBoxes[cb.label]), 0);\r\n        const otherDeduction = n(s.advance) + n(s.salesDebits) + n(s.underPerformance) + extraDed;\r\n        const totalDeduction =\r\n            professionalTax + n(s.incomeTax) + n(s.providentFund) + n(s.loanDeduction) + otherDeduction;\r\n\r\n        const netSalary = grossSalary - totalDeduction;\r\n\r\n        return {\r\n            ...s,\r\n            otherAllowance,\r\n            otherDeduction,\r\n            grossSalary,\r\n            professionalTax,        // ensure the ESS shows under \"ESS\" on payslip\r\n            totalDeduction,\r\n            netSalary\r\n        };\r\n    };\r\n\r\n    const handleChange = (e) => {\r\n        const { name, value } = e.target;\r\n        const isNumberField = ![\r\n            'name',\r\n            'designation',\r\n            'department',\r\n            'role',\r\n            'salaryDate'\r\n        ].includes(name);\r\n\r\n        const updated = {\r\n            ...employee,\r\n            [name]: isNumberField ? (value === '' ? null : parseFloat(value)) : value\r\n        };\r\n        setEmployee(computeDerived(updated));\r\n    };\r\n\r\n    const handleCustomBoxChange = (label, value) => {\r\n        const box = customBoxes.find(b => b.label === label);\r\n        const isNumeric = box && (box.category === 'Earnings' || box.category === 'Deductions');\r\n        let val = value;\r\n        if (isNumeric) {\r\n            val = value === '' ? 0 : parseFloat(value);\r\n        }\r\n        const nextValues = { ...customBoxValues, [label]: val };\r\n        setCustomBoxValues(nextValues);\r\n        setEmployee(prev => computeDerived(prev, nextValues));\r\n    };\r\n\r\n\r\n    // Fetch name/basic master list\r\n    const [masters, setMasters] = useState([]);\r\n\r\n    useEffect(() => {\r\n        axios.get('/api/employee-masters')\r\n            .then(res => setMasters(res.data || []))\r\n            .catch(() => setMasters([]));\r\n    }, []);\r\n\r\n    const handleMasterSelect = (e) => {\r\n        const selectedEmpId = e.target.value || null;\r\n        const m = masters.find(x => x.employeeId === selectedEmpId);\r\n        const total = m?.basicSalary;\r\n        const shouldSplit = typeof total === 'number' && !Number.isNaN(total) && total > 0;\r\n        const updated = {\r\n            ...employee,\r\n            employeeId: m?.employeeId ?? null,\r\n            name: m?.name ?? '',\r\n            designation: m?.designation ?? employee.designation,\r\n            basicSalary: shouldSplit ? parseFloat((total * 0.40).toFixed(2)) : (m?.basicSalary ?? employee.basicSalary),\r\n            dearnessAllowance: shouldSplit ? parseFloat((total * 0.30).toFixed(2)) : employee.dearnessAllowance,\r\n            hra: shouldSplit ? parseFloat((total * 0.30).toFixed(2)) : employee.hra\r\n        };\r\n        setEmployee(computeDerived(updated));\r\n        setJoinDate(m?.joinDate ?? '');\r\n    };\r\n\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState(null);\r\n    const [success, setSuccess] = useState(null); // toast message state\r\n    const [lastSubmittedKey, setLastSubmittedKey] = useState(null);\r\n    const [lastSubmittedAt, setLastSubmittedAt] = useState(0);\r\n    const navigate = useNavigate();\r\n    const location = useLocation();                   // NEW\r\n\r\n    // Helper to compose YYYY-MM-DD (first of month)\r\n    const defaultSalaryDate = () => {\r\n        const d = new Date();\r\n        const y = d.getFullYear();\r\n        const m = String(d.getMonth() + 1).padStart(2, '0');\r\n        return `${y}-${m}-01`;\r\n    };\r\n\r\n    // Auto-fill salaryDate on load based on URL ?month=YYYY-MM or current month\r\n    useEffect(() => {\r\n        const params = new URLSearchParams(location.search);\r\n        const monthParam = params.get('month'); // expects YYYY-MM\r\n        let initialDate = defaultSalaryDate();\r\n        if (monthParam && /^\\d{4}-\\d{2}$/.test(monthParam)) {\r\n            initialDate = `${monthParam}-01`;\r\n        }\r\n        setEmployee(prev => ({\r\n            ...prev,\r\n            salaryDate: prev.salaryDate || initialDate\r\n        }));\r\n    }, [location.search]);\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        if (loading) return;\r\n        const submitKey = `${String(employee.employeeId || '')}|${String((employee.salaryDate || '').slice(0,7))}`;\r\n        if (lastSubmittedKey && lastSubmittedKey === submitKey && (Date.now() - lastSubmittedAt) < 8000) return;\r\n        setLoading(true);\r\n        setError(null);\r\n        setSuccess(null); // clear any prior toast\r\n\r\n        // Validate Days\r\n        if (employee.days == null || employee.days <= 0) {\r\n            setError('Days is required and must be greater than 0');\r\n            setShowErrorModal(true);\r\n            setLoading(false);\r\n            return;\r\n        }\r\n\r\n        // Frontend duplicate check: require employeeId and prevent duplicate month (silent within debounce window)\r\n        if (!employee.employeeId || String(employee.employeeId).trim() === '') {\r\n            setError('Please select employee from list');\r\n            setShowErrorModal(true);\r\n            setLoading(false);\r\n            return;\r\n        }\r\n        {\r\n            const d = new Date(employee.salaryDate || new Date());\r\n            const year = d.getFullYear();\r\n            const month = d.getMonth() + 1;\r\n            try {\r\n                const res = await axios.get(`/api/employees/exists?employeeId=${encodeURIComponent(employee.employeeId)}&year=${year}&month=${month}`);\r\n                if (res.data.exists) {\r\n                    if (lastSubmittedKey && lastSubmittedKey === submitKey && (Date.now() - lastSubmittedAt) < 8000) {\r\n                        setLoading(false);\r\n                        return;\r\n                    }\r\n                    setError('The salary for the same employee name has already been recorded for this month. Kindly verify the Employee ID');\r\n                    setShowErrorModal(true);\r\n                    setLoading(false);\r\n                    return;\r\n                }\r\n            } catch (err) {\r\n                console.error('Duplicate check failed', err);\r\n                // Optionally block or allow if check fails? \r\n                // Allowing it is safer for UX if API is down, but risk of dupes.\r\n            }\r\n        }\r\n\r\n        const customFieldsList = customBoxes.map(cb => ({\r\n            label: cb.label,\r\n            category: cb.category,\r\n            value: customBoxValues[cb.label]\r\n        })).filter(x => x.value !== undefined && x.value !== null && x.value !== '' && x.value !== 0);\r\n\r\n        const customAllowanceAmount = customFieldsList\r\n            .filter(x => x.category === 'Earnings')\r\n            .reduce((acc, x) => acc + (parseFloat(x.value) || 0), 0);\r\n\r\n        const customDeductionAmount = customFieldsList\r\n            .filter(x => x.category === 'Deductions')\r\n            .reduce((acc, x) => acc + (parseFloat(x.value) || 0), 0);\r\n\r\n        const dto = {\r\n            name: employee.name,\r\n            designation: employee.designation,\r\n            department: employee.department,\r\n            role: employee.role,\r\n            salaryDate: employee.salaryDate,\r\n            employeeId: employee.employeeId,\r\n            days: employee.days,\r\n            basicSalary: employee.basicSalary,\r\n            hra: employee.hra,\r\n            dearnessAllowance: employee.dearnessAllowance,\r\n            conveyanceAllowance: employee.conveyanceAllowance,\r\n            specialAllowance: employee.specialAllowance,\r\n            leads: employee.leads,\r\n            performanceIncentive: employee.performanceIncentive,\r\n            perCall: employee.perCall,\r\n            areaAllowance: employee.areaAllowance,\r\n            os: employee.os,\r\n            roadshow: employee.roadshow,\r\n            review: employee.review,\r\n            dresscode: employee.dresscode,\r\n            attendanceAllowance: employee.attendanceAllowance,\r\n            arrears: employee.arrears,\r\n            bonus: employee.bonus,\r\n            professionalTax: employee.professionalTax,\r\n            incomeTax: employee.incomeTax,\r\n            providentFund: employee.providentFund,\r\n            advance: employee.advance,\r\n            loanDeduction: employee.loanDeduction,\r\n            salesDebits: employee.salesDebits,\r\n            underPerformance: employee.underPerformance,\r\n            otherAllowance: employee.otherAllowance,\r\n            otherDeduction: employee.otherDeduction,\r\n            grossSalary: employee.grossSalary,\r\n            totalDeduction: employee.totalDeduction,\r\n            netSalary: employee.netSalary,\r\n            customFields: JSON.stringify(customFieldsList),\r\n            customAllowanceAmount,\r\n            customDeductionAmount\r\n        };\r\n        try {\r\n            await axios.post('/api/employees', dto, {\r\n                headers: { 'Content-Type': 'application/json', Accept: 'application/json' }\r\n            });\r\n            setSuccess('Saved successfully');\r\n            setTimeout(() => setSuccess(null), 3000);\r\n            setLastSubmittedKey(submitKey);\r\n            setLastSubmittedAt(Date.now());\r\n            // Stay on the current page\r\n        } catch (err) {\r\n            setError(err?.response?.data?.message || err.message);\r\n            setShowErrorModal(true);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n\r\n\r\n    const handleNextEmployee = () => {\r\n        // Clear the form for next entry, keep the current salaryDate\r\n        setCustomBoxValues({});\r\n        setEmployee(prev => computeDerived({\r\n            name: '',\r\n            designation: '',\r\n            department: '',\r\n            role: '',\r\n            salaryDate: prev.salaryDate,\r\n            employeeId: null,\r\n\r\n            // Inputs\r\n            days: null,\r\n            basicSalary: null,\r\n            hra: null,\r\n            dearnessAllowance: null,\r\n            conveyanceAllowance: null,\r\n            specialAllowance: null,\r\n            leads: null,\r\n            performanceIncentive: null,\r\n            perCall: null,\r\n            areaAllowance: null,\r\n            os: null,\r\n            roadshow: null,\r\n            review: null,\r\n            dresscode: null,\r\n            attendanceAllowance: null,\r\n            arrears: null,\r\n            bonus: null,\r\n\r\n            // Deductions\r\n            professionalTax: null,\r\n            advance: null,\r\n            loanDeduction: null,\r\n            salesDebits: null,\r\n            underPerformance: null\r\n        }));\r\n        setShowAttendance(false);\r\n        setShowSalary(false);\r\n        setShowMoreAllowances(false);\r\n        setShowMoreDeductions(false);\r\n        setShowMoreReadonly(false);\r\n        setShowAttendanceModal(false);\r\n        setJoinDate('');\r\n        setAttendance({ totalLeave: 0, totalPermission: 0, permittedLeave: 0, absentDays: 0 });\r\n        setError(null);\r\n        setShowErrorModal(false);\r\n        setSuccess(null);\r\n    };\r\n\r\n    const enterSalary = () => {\r\n        if (!employee.employeeId || String(employee.employeeId).trim() === '') {\r\n            setError('Please select employee from list');\r\n            setShowErrorModal(true);\r\n            return;\r\n        }\r\n        setError(null);\r\n        setShowErrorModal(false);\r\n        setShowSalary(true);\r\n    };\r\n\r\n    // Attendance state\r\n    const [joinDate, setJoinDate] = useState('');\r\n    const [attendance, setAttendance] = useState({\r\n        totalLeave: 0,\r\n        totalPermission: 0,\r\n        permittedLeave: 0,\r\n        absentDays: 0,\r\n    });\r\n    const [selectedMonth, setSelectedMonth] = useState('');\r\n\r\n    // NEW: staged UI toggles + category\r\n    const [showAttendance, setShowAttendance] = useState(false);\r\n    const [showSalary, setShowSalary] = useState(false);\r\n    const [showAttendanceModal, setShowAttendanceModal] = useState(false);\r\n    const [showMoreAllowances, setShowMoreAllowances] = useState(false);\r\n    const [showMoreDeductions, setShowMoreDeductions] = useState(false);\r\n    const [showMoreReadonly, setShowMoreReadonly] = useState(false);\r\n    const [showErrorModal, setShowErrorModal] = useState(false);\r\n    const [activeTab, setActiveTab] = useState('Employee');\r\n    const monthNames = ['January','February','March','April','May','June','July','August','September','October','November','December'];\r\n    const now = new Date();\r\n    const currentYear = now.getFullYear();\r\n    const years = Array.from({ length: 11 }, (_, i) => currentYear - 5 + i);\r\n\r\n    // Tenure-based permitted leave using salary date (if set), else today\r\n    const [overridePermittedLeave, setOverridePermittedLeave] = useState(false);\r\n    const calcPermittedLeave = useCallback((joinDateStr, monthYearStr) => {\r\n        if (!joinDateStr || !monthYearStr) return 0;\r\n\r\n        const jd = new Date(joinDateStr);\r\n        const jYear = jd.getFullYear();\r\n        const jMonth = jd.getMonth(); // 0-based\r\n\r\n        const [refYearStr, refMonthStr] = monthYearStr.split('-'); // \"YYYY-MM\"\r\n        const rYear = parseInt(refYearStr, 10);\r\n        const rMonth = parseInt(refMonthStr, 10) - 1; // to 0-based\r\n\r\n        const monthsDiff = (rYear - jYear) * 12 + (rMonth - jMonth);\r\n        if (monthsDiff < 12) return 0;   // < 1 year\r\n        const years = Math.floor(monthsDiff / 12);\r\n        if (years === 1) return 1;       // exactly 1 year\r\n        return 2;                        // > 1 year\r\n    }, []);\r\n\r\n    // Derive permittedLeave, absentDays, and working days\r\n    useEffect(() => {\r\n        // Use selected salary month (YYYY-MM), or derive from salaryDate\r\n        const monthYear = selectedMonth || (employee.salaryDate ? employee.salaryDate.slice(0, 7) : null);\r\n        const computedPermitted = calcPermittedLeave(joinDate, monthYear);\r\n        const permitted = overridePermittedLeave ? (attendance.permittedLeave || 0) : computedPermitted;\r\n\r\n        const leaveTaken = attendance.totalLeave || 0;\r\n        const usedByLeave = Math.min(leaveTaken, permitted);\r\n        const remainingRights = permitted - usedByLeave;\r\n        const leaveAbsent = Math.max(leaveTaken - permitted, 0);\r\n\r\n        const permissionCount = attendance.totalPermission || 0;\r\n        const permissionImpact = permissionCount > 2 ? (permissionCount - 2) * 0.5 : 0;\r\n        const permissionAfterComp = Math.max(permissionImpact - remainingRights, 0);\r\n\r\n        const absent = leaveAbsent + permissionAfterComp;\r\n        const workingDays = Math.max(30 - absent, 0);\r\n\r\n        setAttendance((prev) => ({\r\n            ...prev,\r\n            permittedLeave: permitted,\r\n            absentDays: absent,\r\n        }));\r\n\r\n        setEmployee((prev) => ({\r\n            ...prev,\r\n            days: workingDays,\r\n        }));\r\n    }, [joinDate, selectedMonth, attendance.totalLeave, attendance.totalPermission, overridePermittedLeave, attendance.permittedLeave, calcPermittedLeave]);\r\n\r\n    return (\r\n        <div className=\"page add-salary\">\r\n            {/* Success toast, loading, error */}\r\n            {success && (\r\n                <div style={{ position: 'fixed', right: 16, bottom: 16, zIndex: 9999 }}>\r\n                    <div style={{\r\n                        background: '#198754', color: '#fff',\r\n                        padding: '10px 14px', borderRadius: 8,\r\n                        boxShadow: '0 2px 10px rgba(0,0,0,0.2)'\r\n                    }}>\r\n                        {success}\r\n                    </div>\r\n                </div>\r\n            )}\r\n            {showErrorModal && (\r\n                <div\r\n                    style={{\r\n                        position: 'fixed',\r\n                        inset: 0,\r\n                        background: 'rgba(0,0,0,0.4)',\r\n                        display: 'flex',\r\n                        alignItems: 'center',\r\n                        justifyContent: 'center',\r\n                        zIndex: 1000\r\n                    }}\r\n                >\r\n                    <div\r\n                        style={{\r\n                            background: '#fff',\r\n                            borderRadius: 8,\r\n                            padding: 16,\r\n                            width: '90%',\r\n                            maxWidth: 420\r\n                        }}\r\n                    >\r\n                        <div style={{ color: '#dc3545', marginBottom: 12 }}>{error}</div>\r\n                        <div className=\"btn-container btn-right\">\r\n                            <button\r\n                                type=\"button\"\r\n                                className=\"btn btn-secondary btn-rounded\"\r\n                                onClick={() => setShowErrorModal(false)}\r\n                            >\r\n                                Close\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n            <div className=\"panel\" style={!showSalary ? { maxWidth: 700 } : { maxWidth: 1100 }}>\r\n                {loading && <div>Saving...</div>}\r\n                {error && <div style={{ color: 'red' }}>{error}</div>}\r\n\r\n                <form onSubmit={handleSubmit}>\r\n                    {/* Header bar */}\r\n                    <div className=\"header-bar\" style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between', gap: 16, marginBottom: 16 }}>\r\n                        <h2 className=\"section-title\" style={{ margin: 0 }}>Add Salary Details</h2>\r\n                        <div style={{ display: 'flex', alignItems: 'center', gap: 12 }}>\r\n                            {(() => {\r\n                                const parts = (selectedMonth || `${currentYear}-${String(now.getMonth()+1).padStart(2,'0')}`).split('-');\r\n                                const yy = parseInt(parts[0], 10);\r\n                                const mm = parseInt(parts[1], 10);\r\n                                return (\r\n                                    <div style={{ display: 'flex', gap: 8 }}>\r\n                                        <select\r\n                                            aria-label=\"Select Month\"\r\n                                            value={mm}\r\n                                            onChange={(e) => {\r\n                                                const m = parseInt(e.target.value, 10);\r\n                                                const y = yy || currentYear;\r\n                                                setSelectedMonth(`${String(y)}-${String(m).padStart(2,'0')}`);\r\n                                            }}\r\n                                        >\r\n                                            {monthNames.map((n, idx) => (\r\n                                                <option key={n} value={idx+1}>{n}</option>\r\n                                            ))}\r\n                                        </select>\r\n                                        <select\r\n                                            aria-label=\"Select Year\"\r\n                                            value={yy}\r\n                                            onChange={(e) => {\r\n                                                const y = parseInt(e.target.value, 10);\r\n                                                const m = mm || (now.getMonth()+1);\r\n                                                setSelectedMonth(`${String(y)}-${String(m).padStart(2,'0')}`);\r\n                                            }}\r\n                                        >\r\n                                            {years.map(y => (\r\n                                                <option key={y} value={y}>{y}</option>\r\n                                            ))}\r\n                                        </select>\r\n                                    </div>\r\n                                );\r\n                            })()}\r\n                            <div>\r\n                                <select\r\n                                    aria-label=\"Select Employee\"\r\n                                    value={employee.employeeId ?? ''}\r\n                                    onChange={handleMasterSelect}\r\n                                >\r\n                                    <option value=\"\">Select employee</option>\r\n                                    {masters.map(m => (\r\n                                        <option key={m.id} value={m.employeeId}>{m.name}</option>\r\n                                    ))}\r\n                                </select>\r\n                            </div>\r\n                        </div>\r\n                        <div>\r\n                            <button\r\n                                type=\"button\"\r\n                                className=\"btn btn-primary btn-rounded\"\r\n                                onClick={() => setShowSalary(true)}\r\n                            >\r\n                                Start Salary Entry\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                    {showSalary && (\r\n                        <>\r\n                        <div style={{ display: 'flex', gap: 24 }}>\r\n                            <div className=\"sidebar-nav\" style={{ width: 220, borderRight: '1px solid #e5e7eb' }}>\r\n                                {[\r\n                                    { key: 'Employee', label: 'Earnings', icon: 'ðŸ‘¤' },\r\n                                    { key: 'Earnings', label: 'Allowances', icon: 'ðŸ’°' },\r\n                                    { key: 'Deductions', label: 'Deductions', icon: 'ðŸ§¾' },\r\n                                    { key: 'Summary', label: 'Summary', icon: 'ðŸ“Š' }\r\n                                ].map(t => (\r\n                                    <button\r\n                                        key={t.key}\r\n                                        type=\"button\"\r\n                                        onClick={() => setActiveTab(t.key)}\r\n                                        className=\"btn\"\r\n                                        style={{\r\n                                            display: 'flex',\r\n                                            alignItems: 'center',\r\n                                            gap: 8,\r\n                                            width: '100%',\r\n                                            justifyContent: 'flex-start',\r\n                                            background: 'transparent',\r\n                                            border: 'none',\r\n                                            padding: '10px 8px',\r\n                                            color: activeTab === t.key ? '#0d6efd' : '#374151',\r\n                                            fontWeight: activeTab === t.key ? 700 : 500,\r\n                                            cursor: 'pointer'\r\n                                        }}\r\n                                    >\r\n                                        <span aria-hidden>{t.icon}</span>\r\n                                        {t.label}\r\n                                    </button>\r\n                                ))}\r\n                            </div>\r\n                            <div style={{ flex: 1 }}>\r\n                                {activeTab === 'Employee' && (\r\n                                    <div className=\"form-grid\">\r\n                                        <div className=\"form-item\">\r\n                                            <label htmlFor=\"designation\">Designation</label>\r\n                                            <input id=\"designation\" name=\"designation\" type=\"text\" value={employee.designation ?? ''} onChange={handleChange}/>\r\n                                        </div>\r\n                                        <div className=\"form-item\">\r\n                                            <label htmlFor=\"basicSalary\">Basic salary</label>\r\n                                            <input id=\"basicSalary\" name=\"basicSalary\" type=\"number\" value={employee.basicSalary ?? ''} onChange={handleChange}/>\r\n                                        </div>\r\n                                        <div className=\"form-item\">\r\n                                            <label htmlFor=\"specialAllowance\">Special allowance</label>\r\n                                            <input id=\"specialAllowance\" name=\"specialAllowance\" type=\"number\" value={employee.specialAllowance ?? ''} onChange={handleChange}/>\r\n                                        </div>\r\n                                        <div className=\"form-item\">\r\n                                            <label htmlFor=\"hra\">House Rent Allowance</label>\r\n                                            <input id=\"hra\" name=\"hra\" type=\"number\" value={employee.hra ?? ''} onChange={handleChange}/>\r\n                                        </div>\r\n                                        <div className=\"form-item\">\r\n                                            <label htmlFor=\"dearnessAllowance\">Dearness Allowance</label>\r\n                                            <input id=\"dearnessAllowance\" name=\"dearnessAllowance\" type=\"number\" value={employee.dearnessAllowance ?? ''} onChange={handleChange}/>\r\n                                        </div>\r\n                                        {customBoxes.filter(cb => cb.category === 'Employee').map(cb => (\r\n                                            <div key={cb.id} className=\"form-item\">\r\n                                                <label>{cb.label}</label>\r\n                                                <input\r\n                                                    type=\"text\"\r\n                                                    value={(customBoxValues[cb.label] ?? '')}\r\n                                                    onChange={(e) => handleCustomBoxChange(cb.label, e.target.value)}\r\n                                                />\r\n                                            </div>\r\n                                        ))}\r\n\r\n                                    </div>\r\n                                )}\r\n\r\n                                {activeTab === 'Earnings' && (\r\n                                    <div className=\"form-grid\">\r\n                                        <div className=\"form-item\"><label htmlFor=\"attendanceAllowance\">Attendance allowance</label><input id=\"attendanceAllowance\" name=\"attendanceAllowance\" type=\"number\" value={employee.attendanceAllowance ?? ''} onChange={handleChange}/></div>\r\n                                        <div className=\"form-item\"><label htmlFor=\"areaAllowance\">Area allowance</label><input id=\"areaAllowance\" name=\"areaAllowance\" type=\"number\" value={employee.areaAllowance ?? ''} onChange={handleChange}/></div>\r\n                                        <div className=\"form-item\"><label htmlFor=\"dresscode\">Dresscode</label><input id=\"dresscode\" name=\"dresscode\" type=\"number\" value={employee.dresscode ?? ''} onChange={handleChange}/></div>\r\n                                        <div className=\"form-item\"><label htmlFor=\"os\">OS</label><input id=\"os\" name=\"os\" type=\"number\" value={employee.os ?? ''} onChange={handleChange}/></div>\r\n                                        <div className=\"form-item\"><label htmlFor=\"performanceIncentive\">Sales incentive</label><input id=\"performanceIncentive\" name=\"performanceIncentive\" type=\"number\" value={employee.performanceIncentive ?? ''} onChange={handleChange}/></div>\r\n                                        <div className=\"form-item\"><label htmlFor=\"review\">Review</label><input id=\"review\" name=\"review\" type=\"number\" value={employee.review ?? ''} onChange={handleChange}/></div>\r\n                                        <div className=\"form-item\"><label htmlFor=\"roadshow\">Roadshow promo</label><input id=\"roadshow\" name=\"roadshow\" type=\"number\" value={employee.roadshow ?? ''} onChange={handleChange}/></div>\r\n                                        <div className=\"form-item\"><label htmlFor=\"perCall\">Per-call inc</label><input id=\"perCall\" name=\"perCall\" type=\"number\" value={employee.perCall ?? ''} onChange={handleChange}/></div>\r\n                                        <div className=\"form-item\"><label htmlFor=\"arrears\">Arrears</label><input id=\"arrears\" name=\"arrears\" type=\"number\" value={employee.arrears ?? ''} onChange={handleChange}/></div>\r\n                                        <div className=\"form-item\"><label htmlFor=\"bonus\">Bonus</label><input id=\"bonus\" name=\"bonus\" type=\"number\" value={employee.bonus ?? ''} onChange={handleChange}/></div>\r\n                                        {customBoxes.filter(cb => cb.category === 'Earnings').map(cb => (\r\n                                            <div key={cb.id} className=\"form-item\">\r\n                                                <label>{cb.label} <button type=\"button\" style={{ fontSize: '0.7em', color: 'red', border: 'none', background: 'none' }} onClick={() => {\r\n                                                    setCustomBoxes(prev => prev.filter(x => x.id !== cb.id));\r\n                                                    const next = { ...customBoxValues };\r\n                                                    delete next[cb.label];\r\n                                                    setCustomBoxValues(next);\r\n                                                    setEmployee(prevEmp => computeDerived(prevEmp, next));\r\n                                                }}>(x)</button></label>\r\n                                                <input\r\n                                                    type=\"number\"\r\n                                                    value={(customBoxValues[cb.label] ?? '')}\r\n                                                    onChange={(e) => handleCustomBoxChange(cb.label, e.target.value)}\r\n                                                />\r\n                                            </div>\r\n                                        ))}\r\n\r\n\r\n                                        <div className=\"form-item\"><label>Other allowance</label><input type=\"number\" readOnly aria-readonly=\"true\" value={employee.otherAllowance?.toFixed(2) ?? '0.00'} style={{ background:'#f3f4f6', color:'#6b7280' }}/></div>\r\n                                    </div>\r\n                                )}\r\n\r\n                                {activeTab === 'Deductions' && (\r\n                                    <div className=\"form-grid\">\r\n                                        <div className=\"form-item\"><label htmlFor=\"advance\">Advance</label><input id=\"advance\" name=\"advance\" type=\"number\" value={employee.advance ?? ''} onChange={handleChange}/></div>\r\n                                        <div className=\"form-item\"><label htmlFor=\"loanDeduction\">Loan Deduction</label><input id=\"loanDeduction\" name=\"loanDeduction\" type=\"number\" value={employee.loanDeduction ?? ''} onChange={handleChange}/></div>\r\n                                        <div className=\"form-item\"><label htmlFor=\"professionalTax\">Professional Tax</label><input id=\"professionalTax\" name=\"professionalTax\" type=\"number\" value={employee.professionalTax ?? ''} onChange={handleChange}/></div>\r\n                                        <div className=\"form-item\"><label htmlFor=\"underPerformance\">Under Performance</label><input id=\"underPerformance\" name=\"underPerformance\" type=\"number\" value={employee.underPerformance ?? ''} onChange={handleChange}/></div>\r\n                                        <div className=\"form-item\"><label htmlFor=\"salesDebits\">Sales Debits</label><input id=\"salesDebits\" name=\"salesDebits\" type=\"number\" value={employee.salesDebits ?? ''} onChange={handleChange}/></div>\r\n                                        {customBoxes.filter(cb => cb.category === 'Deductions').map(cb => (\r\n                                            <div key={cb.id} className=\"form-item\">\r\n                                                <label>{cb.label}</label>\r\n                                                <input\r\n                                                    type=\"number\"\r\n                                                    value={(customBoxValues[cb.label] ?? '')}\r\n                                                    onChange={(e) => handleCustomBoxChange(cb.label, e.target.value)}\r\n                                                />\r\n                                            </div>\r\n                                        ))}\r\n\r\n\r\n                                        <div className=\"form-item\"><label>Other deduction</label><input type=\"number\" readOnly aria-readonly=\"true\" value={employee.otherDeduction?.toFixed(2) ?? '0.00'} style={{ background:'#f3f4f6', color:'#6b7280' }}/></div>\r\n                                    </div>\r\n                                )}\r\n\r\n                                {activeTab === 'Summary' && (\r\n                                    <div className=\"form-grid\">\r\n                                        <div className=\"form-item\"><label htmlFor=\"days\">Days worked</label><input id=\"days\" name=\"days\" type=\"number\" value={employee.days ?? ''} readOnly aria-readonly=\"true\" style={{ background:'#f3f4f6', color:'#6b7280' }}/></div>\r\n                                        <div className=\"form-item\"><label>Gross salary</label><input type=\"number\" readOnly aria-readonly=\"true\" value={employee.grossSalary?.toFixed(2) ?? '0.00'} style={{ background:'#f3f4f6', color:'#6b7280' }}/></div>\r\n                                        <div className=\"form-item\"><label>Total deductions</label><input type=\"number\" readOnly aria-readonly=\"true\" value={employee.totalDeduction?.toFixed(2) ?? '0.00'} style={{ background:'#f3f4f6', color:'#6b7280' }}/></div>\r\n                                        <div className=\"form-item\"><label>Net salary</label><input type=\"number\" readOnly aria-readonly=\"true\" value={employee.netSalary?.toFixed(2) ?? '0.00'} style={{ background:'#f3f4f6', color:'#6b7280' }}/></div>\r\n                                        <div className=\"form-item\"><label htmlFor=\"salaryDate\">Salary Date</label><input id=\"salaryDate\" name=\"salaryDate\" type=\"date\" value={employee.salaryDate ?? ''} onChange={handleChange}/></div>\r\n                                        \r\n                                        {customBoxes.filter(cb => cb.category === 'Summary').map(cb => (\r\n                                            <div key={cb.id} className=\"form-item\">\r\n                                                <label>{cb.label} <button type=\"button\" style={{ fontSize: '0.7em', color: 'red', border: 'none', background: 'none' }} onClick={() => {\r\n                                                    setCustomBoxes(prev => prev.filter(x => x.id !== cb.id));\r\n                                                    const next = { ...customBoxValues };\r\n                                                    delete next[cb.label];\r\n                                                    setCustomBoxValues(next);\r\n                                                    setEmployee(prevEmp => computeDerived(prevEmp, next));\r\n                                                }}>(x)</button></label>\r\n                                                <input\r\n                                                    type=\"text\"\r\n                                                    value={(customBoxValues[cb.label] ?? '')}\r\n                                                    onChange={(e) => handleCustomBoxChange(cb.label, e.target.value)}\r\n                                                />\r\n                                            </div>\r\n                                        ))}\r\n\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n                            <div style={{ width: 300 }}>\r\n                                <div className=\"summary-card\" style={{ border: '1px solid #e5e7eb', borderRadius: 8, padding: 16 }}>\r\n                                    <div style={{ fontWeight: 700, marginBottom: 8 }}>Attendance Summary</div>\r\n                                    {(!employee.days || employee.days <= 0) ? (\r\n                                        <div style={{ background: '#f9fafb', border: '1px dashed #d1d5db', borderRadius: 8, padding: 12, color: '#6b7280' }}>\r\n                                            No Attendance Data\r\n                                            <div style={{ marginTop: 4 }}>Please provide attendance details to calculate live salary values.</div>\r\n                                        </div>\r\n                                    ) : (\r\n                                        <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: 8 }}>\r\n                                            <div>\r\n                                                <div style={{ color: '#6b7280' }}>Leave</div>\r\n                                                <div style={{ fontWeight: 600 }}>{n(attendance.totalLeave)}</div>\r\n                                            </div>\r\n                                            <div>\r\n                                                <div style={{ color: '#6b7280' }}>Permission</div>\r\n                                                <div style={{ fontWeight: 600 }}>{n(attendance.totalPermission)}</div>\r\n                                            </div>\r\n                                            <div>\r\n                                                <div style={{ color: '#6b7280' }}>Permitted</div>\r\n                                                <div style={{ fontWeight: 600 }}>{n(attendance.permittedLeave)}</div>\r\n                                            </div>\r\n                                            <div>\r\n                                                <div style={{ color: '#6b7280' }}>Absent</div>\r\n                                                <div style={{ fontWeight: 600 }}>{n(attendance.absentDays)}</div>\r\n                                            </div>\r\n                                        </div>\r\n                                    )}\r\n                                    <div style={{ marginTop: 12 }}>\r\n                                        <button\r\n                                            type=\"button\"\r\n                                            className=\"btn btn-outline-primary btn-rounded\"\r\n                                            onClick={() => setShowAttendanceModal(true)}\r\n                                        >\r\n                                            Edit Attendance\r\n                                        </button>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        </>\r\n                    )}\r\n\r\n                    \r\n\r\n                    {showAttendance && !showSalary && (\r\n                        <div className=\"btn-container btn-center\">\r\n                            <button\r\n                                type=\"button\"\r\n                                className=\"btn btn-primary btn-rounded\"\r\n                                onClick={enterSalary}\r\n                            >\r\n                                Enter Salary\r\n                            </button>\r\n                        </div>\r\n                    )}\r\n\r\n                    {showSalary && (\r\n                        <>\r\n                        <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr 1fr', gap: 16, margin: '16px 0' }}>\r\n                            <div style={{ border: '1px solid #e5e7eb', borderRadius: 8, padding: 16 }}>\r\n                                <div>Gross</div>\r\n                                <div style={{ fontSize: 20, fontWeight: 700 }}>â‚¹ {n(employee.grossSalary).toLocaleString()}</div>\r\n                            </div>\r\n                            <div style={{ border: '1px solid #e5e7eb', borderRadius: 8, padding: 16 }}>\r\n                                <div>Total deductions</div>\r\n                                <div style={{ fontSize: 20, fontWeight: 700 }}>â‚¹ {n(employee.totalDeduction).toLocaleString()}</div>\r\n                            </div>\r\n                            <div style={{ border: '1px solid #e5e7eb', borderRadius: 8, padding: 16 }}>\r\n                                <div>Net</div>\r\n                                <div style={{ fontSize: 20, fontWeight: 700 }}>â‚¹ {n(employee.netSalary).toLocaleString()}</div>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"btn-container btn-center\">\r\n                            <button\r\n                                type=\"button\"\r\n                                disabled={loading}\r\n                                className=\"btn btn-primary btn-rounded\"\r\n                                onClick={handleSubmit}\r\n                            >\r\n                                Save\r\n                            </button>\r\n                            <button\r\n                                type=\"button\"\r\n                                className=\"btn btn-outline-secondary btn-rounded\"\r\n                                onClick={handleNextEmployee}\r\n                            >\r\n                                Next\r\n                            </button>\r\n                            <button\r\n                                type=\"button\"\r\n                                className=\"btn btn-secondary btn-rounded\"\r\n                                onClick={() => navigate(-1)}\r\n                            >\r\n                                Cancel\r\n                            </button>\r\n                        </div>\r\n                        </>\r\n                    )}\r\n                </form>\r\n            </div>\r\n\r\n            \r\n            {showAttendanceModal && (\r\n                <div\r\n                    style={{\r\n                        position: 'fixed',\r\n                        inset: 0,\r\n                        background: 'rgba(0,0,0,0.4)',\r\n                        display: 'flex',\r\n                        alignItems: 'center',\r\n                        justifyContent: 'center',\r\n                        zIndex: 1000\r\n                    }}\r\n                >\r\n                    <div\r\n                        style={{\r\n                            background: '#fff',\r\n                            borderRadius: 8,\r\n                            padding: 16,\r\n                            width: '90%',\r\n                            maxWidth: 800,\r\n                            maxHeight: '80vh',\r\n                            overflow: 'auto'\r\n                        }}\r\n                    >\r\n                        <h3 className=\"section-title\">Attendance</h3>\r\n                        <div className=\"form-grid\">\r\n                            <div className=\"form-item\">\r\n                                <label htmlFor=\"joinDate\">Date of Joining</label>\r\n                                {(() => {\r\n                                    const parts = (joinDate || '').split('-');\r\n                                    const jy = parts[0] ? parseInt(parts[0], 10) : currentYear;\r\n                                    const jm = parts[1] ? parseInt(parts[1], 10) : (now.getMonth() + 1);\r\n                                    const jd = parts[2] ? parseInt(parts[2], 10) : now.getDate();\r\n                                    const dim = (y, m) => new Date(y, m, 0).getDate(); // m=1-12\r\n                                    const maxDay = dim(jy, jm);\r\n                                    const safeDay = Math.min(jd, maxDay);\r\n                                    const days = Array.from({ length: maxDay }, (_, i) => i + 1);\r\n                                    const update = (y, m, d) => {\r\n                                        const mClamped = Math.max(1, Math.min(12, m));\r\n                                        const dClamped = Math.min(dim(y, mClamped), Math.max(1, d));\r\n                                        setJoinDate(`${String(y)}-${String(mClamped).padStart(2,'0')}-${String(dClamped).padStart(2,'0')}`);\r\n                                    };\r\n                                    return (\r\n                                        <div style={{ display: 'flex', gap: 8 }}>\r\n                                            <select value={safeDay} onChange={(e) => update(jy, jm, parseInt(e.target.value, 10))}>\r\n                                                {days.map(d => (\r\n                                                    <option key={d} value={d}>{String(d).padStart(2,'0')}</option>\r\n                                                ))}\r\n                                            </select>\r\n                                            <select value={jm} onChange={(e) => update(jy, parseInt(e.target.value, 10), safeDay)}>\r\n                                                {monthNames.map((n, idx) => (\r\n                                                    <option key={n} value={idx+1}>{n}</option>\r\n                                                ))}\r\n                                            </select>\r\n                                            <select value={jy} onChange={(e) => update(parseInt(e.target.value, 10), jm, safeDay)}>\r\n                                                {years.map(y => (\r\n                                                    <option key={y} value={y}>{y}</option>\r\n                                                ))}\r\n                                            </select>\r\n                                        </div>\r\n                                    );\r\n                                })()}\r\n                            </div>\r\n\r\n                            <div className=\"form-item\">\r\n                                <label htmlFor=\"totalLeave\">Total Leave Days</label>\r\n                                <input\r\n                                    id=\"totalLeave\"\r\n                                    type=\"number\"\r\n                                    value={attendance.totalLeave}\r\n                                    onChange={(e) =>\r\n                                        setAttendance(prev => ({\r\n                                            ...prev,\r\n                                            totalLeave: parseFloat(e.target.value || 0),\r\n                                        }))\r\n                                    }\r\n                                />\r\n                            </div>\r\n\r\n                            <div className=\"form-item\">\r\n                                <label htmlFor=\"permissionCount\">Permission/Late Count</label>\r\n                                <input\r\n                                    id=\"permissionCount\"\r\n                                    type=\"number\"\r\n                                    value={attendance.totalPermission}\r\n                                    onChange={(e) =>\r\n                                        setAttendance(prev => ({\r\n                                            ...prev,\r\n                                            totalPermission: parseFloat(e.target.value || 0),\r\n                                        }))\r\n                                    }\r\n                                />\r\n                            </div>\r\n\r\n                            <div className=\"form-item\">\r\n                                <label>Permitted Leave</label>\r\n                                <input\r\n                                    type=\"number\"\r\n                                    value={attendance.permittedLeave}\r\n                                    onChange={(e) => {\r\n                                        const val = parseFloat(e.target.value || 0);\r\n                                        setOverridePermittedLeave(true);\r\n                                        setAttendance(prev => ({ ...prev, permittedLeave: val }));\r\n                                    }}\r\n                                />\r\n                            </div>\r\n\r\n                            <div className=\"form-item\">\r\n                                <label>Absent Days (auto)</label>\r\n                                <input\r\n                                    type=\"number\"\r\n                                    readOnly\r\n                                    aria-readonly=\"true\"\r\n                                    step=\"0.5\"\r\n                                    value={attendance.absentDays}\r\n                                />\r\n                            </div>\r\n\r\n                            <div className=\"form-item\">\r\n                                <label>Working Days (auto)</label>\r\n                                <input\r\n                                    type=\"number\"\r\n                                    readOnly\r\n                                    aria-readonly=\"true\"\r\n                                    step=\"0.5\"\r\n                                    value={employee.days ?? 0}\r\n                                />\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"btn-container btn-right\">\r\n                            <button\r\n                                type=\"button\"\r\n                                className=\"btn btn-primary btn-rounded\"\r\n                                onClick={() => { setShowAttendanceModal(false); setShowAttendance(true); }}\r\n                            >\r\n                                Save\r\n                            </button>\r\n                            <button\r\n                                type=\"button\"\r\n                                className=\"btn btn-secondary btn-rounded\"\r\n                                onClick={() => setShowAttendanceModal(false)}\r\n                            >\r\n                                Cancel\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n"],"names":["AddEmployee","_employee$employeeId","_employee$designation","_employee$basicSalary","_employee$specialAllo","_employee$hra","_employee$dearnessAll","_employee$attendanceA","_employee$areaAllowan","_employee$dresscode","_employee$os","_employee$performance","_employee$review","_employee$roadshow","_employee$perCall","_employee$arrears","_employee$bonus","_employee$otherAllowa","_employee$otherAllowa2","_employee$advance","_employee$loanDeducti","_employee$professiona","_employee$underPerfor","_employee$salesDebits","_employee$otherDeduct","_employee$otherDeduct2","_employee$days","_employee$grossSalary","_employee$grossSalary2","_employee$totalDeduct","_employee$totalDeduct2","_employee$netSalary$t","_employee$netSalary","_employee$salaryDate","_employee$days2","employee","setEmployee","useState","name","designation","department","role","salaryDate","days","basicSalary","hra","dearnessAllowance","conveyanceAllowance","specialAllowance","leads","performanceIncentive","perCall","areaAllowance","os","roadshow","review","dresscode","attendanceAllowance","arrears","bonus","professionalTax","advance","loanDeduction","salesDebits","underPerformance","otherAllowance","otherDeduction","grossSalary","totalDeduction","netSalary","n","v","customBoxes","setCustomBoxes","customBoxValues","setCustomBoxValues","useEffect","saved","localStorage","getItem","parsed","JSON","parse","normalized","Array","isArray","map","x","id","label","category","_unused","computeDerived","s","currentBoxes","arguments","length","undefined","proratedCore","nonProrated","extraEarn","filter","cb","reduce","acc","extraDed","incomeTax","providentFund","_objectSpread","handleChange","e","value","target","isNumberField","includes","updated","parseFloat","handleCustomBoxChange","box","find","b","val","nextValues","prev","masters","setMasters","axios","get","then","res","data","catch","loading","setLoading","error","setError","success","setSuccess","lastSubmittedKey","setLastSubmittedKey","lastSubmittedAt","setLastSubmittedAt","navigate","useNavigate","location","useLocation","monthParam","URLSearchParams","search","initialDate","defaultSalaryDate","d","Date","y","getFullYear","m","String","getMonth","padStart","concat","test","handleSubmit","async","preventDefault","submitKey","employeeId","slice","now","setShowErrorModal","trim","year","month","encodeURIComponent","exists","err","console","customFieldsList","customAllowanceAmount","customDeductionAmount","dto","customFields","stringify","post","headers","Accept","setTimeout","_err$response","_err$response$data","response","message","joinDate","setJoinDate","attendance","setAttendance","totalLeave","totalPermission","permittedLeave","absentDays","selectedMonth","setSelectedMonth","showAttendance","setShowAttendance","showSalary","setShowSalary","showAttendanceModal","setShowAttendanceModal","showMoreAllowances","setShowMoreAllowances","showMoreDeductions","setShowMoreDeductions","showMoreReadonly","setShowMoreReadonly","showErrorModal","activeTab","setActiveTab","monthNames","currentYear","years","from","_","i","overridePermittedLeave","setOverridePermittedLeave","calcPermittedLeave","useCallback","joinDateStr","monthYearStr","jd","jYear","jMonth","refYearStr","refMonthStr","split","monthsDiff","parseInt","Math","floor","monthYear","computedPermitted","permitted","leaveTaken","usedByLeave","min","remainingRights","leaveAbsent","max","permissionCount","permissionImpact","absent","workingDays","_jsxs","className","children","_jsx","style","position","right","bottom","zIndex","background","color","padding","borderRadius","boxShadow","inset","display","alignItems","justifyContent","width","maxWidth","marginBottom","type","onClick","onSubmit","gap","margin","parts","yy","mm","onChange","idx","_m$employeeId","_m$name","_m$designation","_m$basicSalary","_m$joinDate","selectedEmpId","total","shouldSplit","Number","isNaN","toFixed","_Fragment","borderRight","key","icon","t","border","fontWeight","cursor","flex","htmlFor","_customBoxValues$cb$l","_customBoxValues$cb$l2","fontSize","next","prevEmp","readOnly","_customBoxValues$cb$l3","_customBoxValues$cb$l4","marginTop","gridTemplateColumns","enterSalary","toLocaleString","disabled","handleNextEmployee","maxHeight","overflow","jy","jm","getDate","dim","maxDay","safeDay","update","mClamped","dClamped","step"],"sourceRoot":""}