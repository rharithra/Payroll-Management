{"version":3,"file":"static/js/889.803e8fac.chunk.js","mappings":"0NA4dA,QAxdA,WACE,MAAOA,EAAWC,IAAgBC,EAAAA,EAAAA,UAAS,KACpCC,EAASC,IAAcF,EAAAA,EAAAA,WAAS,IAChCG,EAAOC,IAAYJ,EAAAA,EAAAA,UAAS,MAI7BK,EAAM,IAAIC,KACVC,EAAcF,EAAIG,cAClBC,EAAQC,MAAMC,KAAK,CAAEC,OAAQ,IAAM,CAACC,EAAGC,IAAMP,EAAc,EAAIO,IAE9DC,EAAeC,IAAoBhB,EAAAA,EAAAA,UAASK,EAAIY,WAAa,IAC7DC,EAAcC,IAAmBnB,EAAAA,EAAAA,UAASO,IAC1Ca,EAAMC,IAAWrB,EAAAA,EAAAA,UAAS,IAC1BsB,EAAMC,IAAWvB,EAAAA,EAAAA,UAAS,KAC1BwB,EAAYC,IAAiBzB,EAAAA,EAAAA,UAAS,IAE7C0B,EAAAA,EAAAA,WAAU,KACRC,KACC,CAACZ,EAAeG,EAAcE,EAAME,IAEvC,MAAMK,EAAiBC,UACrB1B,GAAW,GACXE,EAAS,MACT,IACE,MAAMyB,QAAiBC,EAAAA,EAAMC,IAAI,uBAADC,OAAwBd,EAAY,WAAAc,OAAUjB,EAAa,UAAAiB,OAASZ,EAAI,UAAAY,OAASV,IAC7GO,EAASI,MAAQJ,EAASI,KAAKC,SAC/BnC,EAAa8B,EAASI,KAAKC,SAC3BT,EAAcI,EAASI,KAAKT,cAE5BzB,EAAa8B,EAASI,MACtBR,EAAc,IAElBvB,GAAW,EACb,CAAE,MAAOiC,GACP/B,EAAS,gCACTF,GAAW,GACXkC,QAAQjC,MAAM,4BAA6BgC,EAC7C,GA0CIE,EAAaT,UACjB,MAAMU,EAAOC,aAAaC,QAAQ,SAAW,GAC7C,GAAe,aAATF,GAAgC,UAATA,EAE3B,YADAG,MAAM,kBAGR,MAAMC,EAAUC,EAAiBC,OAAOC,IACtC,MAAMC,EAAIC,OAAOF,EAAEG,QAAU,IAAIC,cACjC,MAAa,aAANH,GAA0B,cAANA,IAE7B,GAAuB,IAAnBJ,EAAQ9B,OAIZ,UACQsC,QAAQC,IAAIT,EAAQU,IAAIP,GAAKf,EAAAA,EAAMuB,KAAK,kBAADrB,OAAmBa,EAAES,GAAE,cACpE3B,IACAc,MAAM,aAADT,OAAcU,EAAQ9B,OAAM,WACnC,CAAE,MAAOuB,GAAM,IAADoB,EAAAC,EACZf,OAAS,OAAHN,QAAG,IAAHA,GAAa,QAAVoB,EAAHpB,EAAKN,gBAAQ,IAAA0B,GAAM,QAANC,EAAbD,EAAetB,YAAI,IAAAuB,OAAhB,EAAHA,EAAqBC,UAAW,qBACxC,MATEhB,MAAM,+BAYJiB,EAAc9B,UAElB,GAAa,WADAW,aAAaC,QAAQ,SAAW,IAG3C,YADAC,MAAM,0BAGR,MAAMC,EAAUC,EAAiBC,OAAOC,GAA8C,cAAzCE,OAAOF,EAAEG,QAAU,IAAIC,eACpE,GAAuB,IAAnBP,EAAQ9B,OAIZ,UACQsC,QAAQC,IAAIT,EAAQU,IAAIP,GAAKf,EAAAA,EAAMuB,KAAK,kBAADrB,OAAmBa,EAAES,GAAE,eACpE3B,IACAc,MAAM,YAADT,OAAaU,EAAQ9B,OAAM,WAClC,CAAE,MAAOuB,GAAM,IAADwB,EAAAC,EACZnB,OAAS,OAAHN,QAAG,IAAHA,GAAa,QAAVwB,EAAHxB,EAAKN,gBAAQ,IAAA8B,GAAM,QAANC,EAAbD,EAAe1B,YAAI,IAAA2B,OAAhB,EAAHA,EAAqBH,UAAW,sBACxC,MATEhB,MAAM,gCAYV,GAAIxC,EAAS,OAAO4D,EAAAA,EAAAA,KAAA,OAAKC,UAAU,mBAAkBC,UAACF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,qBACrE,GAAI3D,EAAO,OAAO0D,EAAAA,EAAAA,KAAA,OAAKC,UAAU,0BAAyBC,SAAE5D,IAI5D,MAOM6D,EAAclB,IAClB,IAAKA,EAAG,MAAO,GACf,MAAMmB,EAAI,IAAI3D,KAAKwC,GACnB,GAAIoB,MAAMD,EAAEE,WAAY,OAAOrB,EAC/B,MAAMsB,EAAKrB,OAAOkB,EAAEI,WAAWC,SAAS,EAAG,KACrCC,EAAKxB,OAAOkB,EAAEhD,WAAa,GAAGqD,SAAS,EAAG,KAC1CE,EAAOP,EAAEzD,cACf,MAAM,GAANwB,OAAUoC,EAAE,KAAApC,OAAIuC,EAAE,KAAAvC,OAAIwC,IAIlBC,EAAa,CACjB,CAAEC,IAAK,aAAcC,MAAO,eAC5B,CAAED,IAAK,OAAQC,MAAO,iBACtB,CAAED,IAAK,cAAeC,MAAO,eAC7B,CAAED,IAAK,aAAcC,MAAO,cAC5B,CAAED,IAAK,OAAQC,MAAO,QACtB,CAAED,IAAK,OAAQC,MAAO,QACtB,CAAED,IAAK,cAAeC,MAAO,gBAC7B,CAAED,IAAK,MAAOC,MAAO,OACrB,CAAED,IAAK,oBAAqBC,MAAO,sBACnC,CAAED,IAAK,sBAAuBC,MAAO,cACrC,CAAED,IAAK,mBAAoBC,MAAO,qBAClC,CAAED,IAAK,QAASC,MAAO,SACvB,CAAED,IAAK,uBAAwBC,MAAO,yBACtC,CAAED,IAAK,UAAWC,MAAO,YACzB,CAAED,IAAK,gBAAiBC,MAAO,kBAC/B,CAAED,IAAK,KAAMC,MAAO,MACpB,CAAED,IAAK,WAAYC,MAAO,kBAC1B,CAAED,IAAK,SAAUC,MAAO,UACxB,CAAED,IAAK,YAAaC,MAAO,aAC3B,CAAED,IAAK,sBAAuBC,MAAO,wBACrC,CAAED,IAAK,UAAWC,MAAO,WACzB,CAAED,IAAK,QAASC,MAAO,SACvB,CAAED,IAAK,iBAAkBC,MAAO,mBAChC,CAAED,IAAK,cAAeC,MAAO,gBAC7B,CAAED,IAAK,kBAAmBC,MAAO,oBACjC,CAAED,IAAK,YAAaC,MAAO,cAC3B,CAAED,IAAK,gBAAiBC,MAAO,MAC/B,CAAED,IAAK,UAAWC,MAAO,WACzB,CAAED,IAAK,gBAAiBC,MAAO,kBAC/B,CAAED,IAAK,cAAeC,MAAO,gBAC7B,CAAED,IAAK,mBAAoBC,MAAO,qBAClC,CAAED,IAAK,iBAAkBC,MAAO,mBAChC,CAAED,IAAK,iBAAkBC,MAAO,mBAChC,CAAED,IAAK,YAAaC,MAAO,cAC3B,CAAED,IAAK,aAAcC,MAAO,eAC5B,CAAED,IAAK,SAAUC,MAAO,WAIpBhC,GAAoB7C,GAAa,IAAI8C,OAAQC,GAEjC4B,EAAWG,KAAMC,IAAQC,OA3D7B,QADMC,EA4DkClC,EAAEgC,EAAIH,YA3D9BM,IAARD,IACD,kBAARA,GAAmC,KAAfA,EAAIE,QAFjBF,SAkEdG,EAAiB,CACrB,CAAER,IAAK,OAAQC,MAAO,iBAEtB,CAAED,IAAK,cAAeC,MAAO,eAG7B,CAAED,IAAK,OAAQC,MAAO,QACtB,CAAED,IAAK,cAAeC,MAAO,gBAC7B,CAAED,IAAK,MAAOC,MAAO,OACrB,CAAED,IAAK,oBAAqBC,MAAO,sBACnC,CAAED,IAAK,sBAAuBC,MAAO,cACrC,CAAED,IAAK,mBAAoBC,MAAO,qBAClC,CAAED,IAAK,QAASC,MAAO,SACvB,CAAED,IAAK,uBAAwBC,MAAO,yBACtC,CAAED,IAAK,UAAWC,MAAO,YACzB,CAAED,IAAK,gBAAiBC,MAAO,kBAC/B,CAAED,IAAK,KAAMC,MAAO,MACpB,CAAED,IAAK,WAAYC,MAAO,kBAC1B,CAAED,IAAK,SAAUC,MAAO,UACxB,CAAED,IAAK,YAAaC,MAAO,aAC3B,CAAED,IAAK,sBAAuBC,MAAO,wBACrC,CAAED,IAAK,UAAWC,MAAO,WACzB,CAAED,IAAK,QAASC,MAAO,SACvB,CAAED,IAAK,iBAAkBC,MAAO,mBAChC,CAAED,IAAK,cAAeC,MAAO,gBAC7B,CAAED,IAAK,kBAAmBC,MAAO,oBACjC,CAAED,IAAK,UAAWC,MAAO,WACzB,CAAED,IAAK,gBAAiBC,MAAO,kBAC/B,CAAED,IAAK,cAAeC,MAAO,gBAC7B,CAAED,IAAK,mBAAoBC,MAAO,qBAClC,CAAED,IAAK,iBAAkBC,MAAO,mBAChC,CAAED,IAAK,iBAAkBC,MAAO,mBAChC,CAAED,IAAK,YAAaC,MAAO,cAE3B,CAAED,IAAK,SAAUC,MAAO,WAIpBQ,EAAYJ,IAChB,GAAW,MAAPA,EAAa,OAAO,EACxB,MAAMjC,EAAIC,OAAOgC,GAAKK,QAAQ,KAAM,IAAIH,OAClCI,EAAIC,OAAOxC,GACjB,OAAOwC,OAAOC,SAASF,GAAKA,EAAI,GAE5BG,EAAyBT,GAAQU,KAAKC,MAAMP,EAASJ,IACrDY,EAAaZ,GAAQU,KAAKC,MAAMP,EAASJ,IAGzCa,GAAkBjD,GAAoB,IAAIkD,OAC9C,CAACC,EAAKC,IAAQD,EAAMX,EAASY,EAAIC,WACjC,GA+EF,OACEC,EAAAA,EAAAA,MAAAC,EAAAA,SAAA,CAAAnC,SAAA,EACEF,EAAAA,EAAAA,KAAA,OAAAE,UACEkC,EAAAA,EAAAA,MAAA,OAAKnC,UAAU,uBAAsBC,SAAA,EACnCF,EAAAA,EAAAA,KAACsC,EAAAA,GAAI,CAACC,GAAG,OAAOtC,UAAU,8BAA6BC,SAAC,wBACxDF,EAAAA,EAAAA,KAAA,UAAQwC,KAAK,SAASC,QAtCT1E,UAAa,IAAD2E,EAAAC,EAC/B,MAAMC,QAAa,8BACbC,EAAO/D,EAAiBS,IAAIP,IAChC,MAAM8D,EAAM,CAAC,EAWb,OAVAzB,EAAe0B,QAAQC,IACrBF,EAAIE,EAAElC,OAAmB,eAAVkC,EAAEnC,IACbV,EAAWnB,EAAEgE,EAAEnC,MACL,oBAAVmC,EAAEnC,IACAc,EAAsB3C,EAAEgE,EAAEnC,MACf,cAAVmC,EAAEnC,KAAiC,mBAAVmC,EAAEnC,IAC1BiB,EAAU9C,EAAEgE,EAAEnC,MAChB7B,EAAEgE,EAAEnC,OAEZiC,EAAI,eAAiB3C,EAAWnB,EAAEiE,YAC3BH,IAIHI,EAAS7B,EAAe8B,KAAKH,GAAe,cAAVA,EAAEnC,KACpCuC,EAAwC,QAA3BV,EAAoB,QAApBC,EAAGtB,EAAe,UAAE,IAAAsB,OAAA,EAAjBA,EAAmB7B,aAAK,IAAA4B,EAAAA,EAAI,OAC5CW,GAAQC,EAAAA,EAAAA,GAAA,CACZ,CAACF,GAAgB,oBACbF,EAAS,CAAE,CAACA,EAAOpC,OAAQW,OAAOM,EAAewB,QAAQ,KAAQ,CAAC,GAExEV,EAAKW,KAAKH,GAEV,MAAMI,EAAKb,EAAKc,MAAMC,cAAcd,GAC9Be,EAAKhB,EAAKc,MAAMG,WACtBjB,EAAKc,MAAMI,kBAAkBF,EAAIH,EAAI,aACrCb,EAAKmB,UAAUH,EAAG,aAADzF,QAAe,IAAI1B,MAAOuH,cAAcC,MAAM,EAAE,IAAG,WASjBhE,UAAU,gCAA+BC,SAAC,oBAGvFF,EAAAA,EAAAA,KAAA,UAAQwC,KAAK,SAASC,QAASA,IAAMyB,OAAOC,QAASlE,UAAU,wCAAuCC,SAAC,WAKvGkC,EAAAA,EAAAA,MAAA,OAAKgC,MAAO,CAAEC,QAAS,OAAQC,IAAK,EAAGC,WAAY,SAAUC,WAAY,QAAStE,SAAA,EAChFF,EAAAA,EAAAA,KAAA,UACIC,UAAU,cACVmE,MAAO,CAAEK,MAAO,OAAQJ,QAAS,eAAgBK,QAAS,WAAYC,SAAU,QAChFC,MAAO1H,EACP2H,SA5Sa7F,IACzB7B,EAAiBsE,OAAOzC,EAAE8F,OAAOF,QACjCpH,EAAQ,IA0SgC0C,SA/UvB,CAAC,UAAU,WAAW,QAAQ,QAAQ,MAAM,OAAO,OAAO,SAAS,YAAY,UAAU,WAAW,YAiV7FX,IAAI,CAACwF,EAAG9H,KAAM+C,EAAAA,EAAAA,KAAA,UAAgB4E,MAAO3H,EAAE,EAAEiD,SAAE6E,GAAhB9H,OAE3C+C,EAAAA,EAAAA,KAAA,UACIC,UAAU,cACVmE,MAAO,CAAEK,MAAO,OAAQJ,QAAS,eAAgBK,QAAS,WAAYC,SAAU,QAChFC,MAAOvH,EACPwH,SA/SY7F,IACxB1B,EAAgBmE,OAAOzC,EAAE8F,OAAOF,QAChCpH,EAAQ,IA6S+B0C,SAE1BtD,EAAM2C,IAAIyF,IAAKhF,EAAAA,EAAAA,KAAA,UAAgB4E,MAAOI,EAAE9E,SAAE8E,GAAdA,SAIlC,MACC,MAAMvG,EAAOC,aAAaC,QAAQ,SAAW,GAC7C,OACEyD,EAAAA,EAAAA,MAAAC,EAAAA,SAAA,CAAAnC,SAAA,EACEF,EAAAA,EAAAA,KAAA,UAAQwC,KAAK,SAASC,QAASjE,EAAYyB,UAAU,sCAAqCC,SAAC,WAGjF,UAATzB,IACCuB,EAAAA,EAAAA,KAAA,UAAQwC,KAAK,SAASC,QAAS5C,EAAaI,UAAU,8BAA8BmE,MAAO,CAAEI,WAAY,GAAItE,SAAC,cAMrH,EAdA,SAkBLF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,kBAAiBC,UAC9BkC,EAAAA,EAAAA,MAAA,SAAOnC,UAAU,kDAAiDC,SAAA,EAChEF,EAAAA,EAAAA,KAAA,SAAOC,UAAU,aAAYC,UAC3BkC,EAAAA,EAAAA,MAAA,MAAAlC,SAAA,EACEF,EAAAA,EAAAA,KAAA,MAAIC,UAAU,WAAUC,SAAC,YACxBmB,EAAe9B,IAAIyB,IAClBhB,EAAAA,EAAAA,KAAA,MAAAE,SAAmBc,EAAIF,OAAdE,EAAIH,YAInBb,EAAAA,EAAAA,KAAA,SAAAE,SACKpB,EAAiB/B,OAAS,EACzB+B,EAAiBS,IAAI0F,IACnB7C,EAAAA,EAAAA,MAAA,MAAAlC,SAAA,EACEF,EAAAA,EAAAA,KAAA,MAAIC,UAAU,WAAUC,SACrB,MACC,MAAMzB,EAAOC,aAAaC,QAAQ,SAAW,GACvCuG,EAA6D,aAAhDhG,OAAO+F,EAAS9F,QAAU,IAAIC,cAE3C+F,GADcjG,OAAO+F,EAAS9F,QAAU,IAAIC,cAClB,aAATX,GAAuByG,GAC9C,OACE9C,EAAAA,EAAAA,MAAA,OAAKnC,UAAU,YAAWC,SAAA,EACxBF,EAAAA,EAAAA,KAACsC,EAAAA,GAAI,CACHC,GAAE,SAAApE,OAAW8G,EAASxF,IACtBQ,UAAS,cAAA9B,OAAgBgH,EAAiB,gBAAkB,cAAa,SACzE,gBAAeA,EACf1C,QAAUzD,IAAYmG,GAAgBnG,EAAEoG,kBAAoBlF,SAC7D,UAGDF,EAAAA,EAAAA,KAAA,UACEyC,QAASA,KAAO0C,GAjWvBpH,WACnB,GAAImG,OAAOmB,QAAQ,kDACjB,UACQpH,EAAAA,EAAMqH,OAAO,kBAADnH,OAAmBsB,IACrC3B,GACF,CAAE,MAAOQ,GACPC,QAAQjC,MAAM,2BAA4BgC,EAC5C,GA0V0DiH,CAAaN,EAASxF,IACxDQ,UAAS,cAAA9B,OAAgBgH,EAAiB,gBAAkB,cAC5DK,SAAUL,EAAejF,SAC1B,aAKN,EAxBA,KA0BFmB,EAAe9B,IAAIyB,IAAG,IAAAyE,EAAA,OACrBzF,EAAAA,EAAAA,KAAA,MAAAE,SACe,eAAZc,EAAIH,IACDV,EAAW8E,EAASjE,EAAIH,MACZ,oBAAZG,EAAIH,IACFc,EAAsBsD,EAASjE,EAAIH,MACtB,cAAZG,EAAIH,KAAmC,mBAAZG,EAAIH,IAC9BiB,EAAUmD,EAASjE,EAAIH,MACP,QADY4E,EAC7BR,EAASjE,EAAIH,YAAI,IAAA4E,EAAAA,EAAI,IAPrBzE,EAAIH,SA7BRoE,EAASxF,MA0CtBO,EAAAA,EAAAA,KAAA,MAAAE,UACEF,EAAAA,EAAAA,KAAA,MAAI0F,QAASrE,EAAetE,OAAS,EAAGkD,UAAU,cAAaC,SAAC,4BAItEF,EAAAA,EAAAA,KAAA,SAAAE,UACEkC,EAAAA,EAAAA,MAAA,MAAAlC,SAAA,EACEF,EAAAA,EAAAA,KAAA,MAAIC,UAAU,aACboB,EAAe9B,IAAKyB,IACnBhB,EAAAA,EAAAA,KAAA,MAAAE,SACe,cAAZc,EAAIH,IAAsBe,KAAKC,MAAME,GAAkB,IADjDf,EAAIH,iBAUvBuB,EAAAA,EAAAA,MAAA,OAAKnC,UAAU,kEAAiEC,SAAA,EAC5EkC,EAAAA,EAAAA,MAAA,OAAAlC,SAAA,CAAK,QACK3C,EAAO,EAAE,OAAKI,GAAc,MAEtCyE,EAAAA,EAAAA,MAAA,OAAAlC,SAAA,EACIF,EAAAA,EAAAA,KAAA,UACEC,UAAU,yBACVuF,SAAmB,IAATjI,EACVkF,QAASA,IAAMjF,EAAQmI,GAAK/D,KAAKgE,IAAI,EAAGD,EAAI,IAAIzF,SACjD,cAGDF,EAAAA,EAAAA,KAAA,UACEC,UAAU,oBACVuF,SAAUjI,IAASI,GAAc,GAAK,EACtC8E,QAASA,IAAMjF,EAAQmI,GAAKA,EAAI,GAAGzF,SACpC,iBAOf,C","sources":["components/EmployeeList.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport axios from 'axios';\r\n\r\nfunction EmployeeList() {\r\n  const [employees, setEmployees] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  // Filter state\r\n  const monthNames = ['January','February','March','April','May','June','July','August','September','October','November','December'];\r\n  const now = new Date();\r\n  const currentYear = now.getFullYear();\r\n  const years = Array.from({ length: 11 }, (_, i) => currentYear - 5 + i);\r\n\r\n  const [selectedMonth, setSelectedMonth] = useState(now.getMonth() + 1);\r\n  const [selectedYear, setSelectedYear] = useState(currentYear);\r\n  const [page, setPage] = useState(0);\r\n  const [size, setSize] = useState(50);\r\n  const [totalPages, setTotalPages] = useState(0);\r\n\r\n  useEffect(() => {\r\n    fetchEmployees();\r\n  }, [selectedMonth, selectedYear, page, size]);\r\n\r\n  const fetchEmployees = async () => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const response = await axios.get(`/api/employees?year=${selectedYear}&month=${selectedMonth}&page=${page}&size=${size}`);\r\n      if (response.data && response.data.content) {\r\n          setEmployees(response.data.content);\r\n          setTotalPages(response.data.totalPages);\r\n      } else {\r\n          setEmployees(response.data);\r\n          setTotalPages(1);\r\n      }\r\n      setLoading(false);\r\n    } catch (err) {\r\n      setError('Error fetching employee data');\r\n      setLoading(false);\r\n      console.error('Error fetching employees:', err);\r\n    }\r\n  };\r\n\r\n  const handleMonthChange = (e) => {\r\n    setSelectedMonth(Number(e.target.value));\r\n    setPage(0);\r\n  };\r\n\r\n  const handleYearChange = (e) => {\r\n    setSelectedYear(Number(e.target.value));\r\n    setPage(0);\r\n  };\r\n\r\n  const handleDelete = async (id) => {\r\n    if (window.confirm('Are you sure you want to delete this employee?')) {\r\n      try {\r\n        await axios.delete(`/api/employees/${id}`);\r\n        fetchEmployees();\r\n      } catch (err) {\r\n        console.error('Error deleting employee:', err);\r\n      }\r\n    }\r\n  };\r\n\r\n  const submitEmployee = async (id) => {\r\n    try {\r\n      await axios.post(`/api/employees/${id}/submit`);\r\n      fetchEmployees();\r\n    } catch (err) {\r\n      alert(err?.response?.data?.message || 'Submit failed');\r\n    }\r\n  };\r\n\r\n  const approveEmployee = async (id) => {\r\n    try {\r\n      await axios.post(`/api/employees/${id}/approve`);\r\n      fetchEmployees();\r\n    } catch (err) {\r\n      alert(err?.response?.data?.message || 'Approve failed');\r\n    }\r\n  };\r\n\r\n  const bulkSubmit = async () => {\r\n    const role = localStorage.getItem('role') || '';\r\n    if (!(role === 'EMPLOYEE' || role === 'ADMIN')) {\r\n      alert('Login required');\r\n      return;\r\n    }\r\n    const targets = visibleEmployees.filter(e => {\r\n      const s = String(e.status || '').toUpperCase();\r\n      return s !== 'APPROVED' && s !== 'SUBMITTED';\r\n    });\r\n    if (targets.length === 0) {\r\n      alert('No rows eligible to submit');\r\n      return;\r\n    }\r\n    try {\r\n      await Promise.all(targets.map(e => axios.post(`/api/employees/${e.id}/submit`)));\r\n      fetchEmployees();\r\n      alert(`Submitted ${targets.length} row(s)`);\r\n    } catch (err) {\r\n      alert(err?.response?.data?.message || 'Bulk submit failed');\r\n    }\r\n  };\r\n\r\n  const bulkApprove = async () => {\r\n    const role = localStorage.getItem('role') || '';\r\n    if (role !== 'ADMIN') {\r\n      alert('Only admin can approve');\r\n      return;\r\n    }\r\n    const targets = visibleEmployees.filter(e => String(e.status || '').toUpperCase() === 'SUBMITTED');\r\n    if (targets.length === 0) {\r\n      alert('No rows eligible to approve');\r\n      return;\r\n    }\r\n    try {\r\n      await Promise.all(targets.map(e => axios.post(`/api/employees/${e.id}/approve`)));\r\n      fetchEmployees();\r\n      alert(`Approved ${targets.length} row(s)`);\r\n    } catch (err) {\r\n      alert(err?.response?.data?.message || 'Bulk approve failed');\r\n    }\r\n  };\r\n\r\n  if (loading) return <div className=\"text-center mt-5\"><div className=\"spinner-border\"></div></div>;\r\n  if (error) return <div className=\"alert alert-danger mt-3\">{error}</div>;\r\n\r\n  // Add CSV download function\r\n  // Helper to determine if a value is meaningful\r\n  const isNonEmpty = (val) => {\r\n    if (val === null || val === undefined) return false;\r\n    if (typeof val === 'string' && val.trim() === '') return false;\r\n    return true;\r\n  };\r\n\r\n  // Helper: format date as dd-mm-yyyy\r\n  const formatDate = (s) => {\r\n    if (!s) return '';\r\n    const d = new Date(s);\r\n    if (isNaN(d.getTime())) return s;\r\n    const dd = String(d.getDate()).padStart(2, '0');\r\n    const mm = String(d.getMonth() + 1).padStart(2, '0');\r\n    const yyyy = d.getFullYear();\r\n    return `${dd}-${mm}-${yyyy}`;\r\n  };\r\n\r\n  // Fixed, comprehensive column set (matches AddEmployee fields)\r\n  const allColumns = [\r\n    { key: 'employeeId', label: 'Employee ID' },\r\n    { key: 'name', label: 'Employee Name' },         // NEW: show name separately\r\n    { key: 'designation', label: 'Designation' },\r\n    { key: 'department', label: 'Department' },\r\n    { key: 'role', label: 'Role' },\r\n    { key: 'days', label: 'Days' },\r\n    { key: 'basicSalary', label: 'Basic Salary' },\r\n    { key: 'hra', label: 'HRA' },\r\n    { key: 'dearnessAllowance', label: 'Dearness Allowance' },\r\n    { key: 'conveyanceAllowance', label: 'Conveyance' },\r\n    { key: 'specialAllowance', label: 'Special Allowance' },\r\n    { key: 'leads', label: 'Leads' },\r\n    { key: 'performanceIncentive', label: 'Performance Incentive' },\r\n    { key: 'perCall', label: 'Per-call' },\r\n    { key: 'areaAllowance', label: 'Area Allowance' },\r\n    { key: 'os', label: 'OS' },\r\n    { key: 'roadshow', label: 'Roadshow Promo' },\r\n    { key: 'review', label: 'Review' },\r\n    { key: 'dresscode', label: 'Dresscode' },\r\n    { key: 'attendanceAllowance', label: 'Attendance Allowance' },\r\n    { key: 'arrears', label: 'Arrears' },\r\n    { key: 'bonus', label: 'Bonus' },\r\n    { key: 'otherAllowance', label: 'Other Allowance' },\r\n    { key: 'grossSalary', label: 'Gross Salary' },\r\n    { key: 'professionalTax', label: 'Professional Tax' },\r\n    { key: 'incomeTax', label: 'Income Tax' },\r\n    { key: 'providentFund', label: 'PF' },\r\n    { key: 'advance', label: 'Advance' },\r\n    { key: 'loanDeduction', label: 'Loan Deduction' },\r\n    { key: 'salesDebits', label: 'Sales Debits' },\r\n    { key: 'underPerformance', label: 'Under Performance' },\r\n    { key: 'otherDeduction', label: 'Other Deduction' },\r\n    { key: 'totalDeduction', label: 'Total Deduction' },\r\n    { key: 'netSalary', label: 'Net Salary' },\r\n    { key: 'salaryDate', label: 'Salary Date' },\r\n    { key: 'status', label: 'Status' },\r\n  ];\r\n\r\n  // Show ONLY rows with at least one meaningful field across all columns\r\n  const visibleEmployees = (employees || []).filter((e) => {\r\n    // 1. Basic empty check\r\n    const hasData = allColumns.some((col) => isNonEmpty(e[col.key]));\r\n    return hasData;\r\n  });\r\n\r\n  // Show ALL columns (even if some cells are blank)\r\n  // Adjust visible columns to remove Income Tax and PF\r\n  const visibleColumns = [\r\n    { key: 'name', label: 'Employee Name' },          // keep name\r\n    //{ key: 'employeeId', label: 'Employee ID' },\r\n    { key: 'designation', label: 'Designation' },\r\n    // Removed: { key: 'department', label: 'Department' },\r\n    // Removed: { key: 'role', label: 'Role' },\r\n    { key: 'days', label: 'Days' },\r\n    { key: 'basicSalary', label: 'Basic Salary' },\r\n    { key: 'hra', label: 'HRA' },\r\n    { key: 'dearnessAllowance', label: 'Dearness Allowance' },\r\n    { key: 'conveyanceAllowance', label: 'Conveyance' },\r\n    { key: 'specialAllowance', label: 'Special Allowance' },\r\n    { key: 'leads', label: 'Leads' },\r\n    { key: 'performanceIncentive', label: 'Performance Incentive' },\r\n    { key: 'perCall', label: 'Per-call' },\r\n    { key: 'areaAllowance', label: 'Area Allowance' },\r\n    { key: 'os', label: 'OS' },\r\n    { key: 'roadshow', label: 'Roadshow Promo' },\r\n    { key: 'review', label: 'Review' },\r\n    { key: 'dresscode', label: 'Dresscode' },\r\n    { key: 'attendanceAllowance', label: 'Attendance Allowance' },\r\n    { key: 'arrears', label: 'Arrears' },\r\n    { key: 'bonus', label: 'Bonus' },\r\n    { key: 'otherAllowance', label: 'Other Allowance' },\r\n    { key: 'grossSalary', label: 'Gross Salary' },\r\n    { key: 'professionalTax', label: 'Professional Tax' },\r\n    { key: 'advance', label: 'Advance' },\r\n    { key: 'loanDeduction', label: 'Loan Deduction' },\r\n    { key: 'salesDebits', label: 'Sales Debits' },\r\n    { key: 'underPerformance', label: 'Under Performance' },\r\n    { key: 'otherDeduction', label: 'Other Deduction' },\r\n    { key: 'totalDeduction', label: 'Total Deduction' },\r\n    { key: 'netSalary', label: 'Net Salary' },\r\n    // removed Salary Date column per request\r\n    { key: 'status', label: 'Status' },\r\n  ];\r\n\r\n  // Add number-safe parser (handles strings like \"34,000.00\")\r\n  const toNumber = (val) => {\r\n    if (val == null) return 0;\r\n    const s = String(val).replace(/,/g, '').trim();\r\n    const n = Number(s);\r\n    return Number.isFinite(n) ? n : 0;\r\n  };\r\n  const formatProfessionalTax = (val) => Math.round(toNumber(val));\r\n  const formatInt = (val) => Math.round(toNumber(val));\r\n\r\n  // Compute total Net Salary for the currently visible rows\r\n  const netSalaryTotal = (visibleEmployees || []).reduce(\r\n    (sum, emp) => sum + toNumber(emp.netSalary),\r\n    0\r\n  );\r\n\r\n  // CSV download (uses visible rows/columns)\r\n  const downloadCsv = () => {\r\n    const headers = visibleColumns.map(c => c.label);\r\n    const headersFull = [...headers, 'Salary Date'];\r\n    const rows = visibleEmployees.map(e => {\r\n      const base = visibleColumns.map(c => {\r\n        const value =\r\n          c.key === 'salaryDate'\r\n            ? formatDate(e[c.key])\r\n            : c.key === 'employeeId'\r\n              ? (e.employeeId ?? '')\r\n              : c.key === 'professionalTax'\r\n                ? formatProfessionalTax(e[c.key])\r\n                : (c.key === 'netSalary' || c.key === 'totalDeduction')\r\n                  ? formatInt(e[c.key])\r\n                : e[c.key];\r\n        return value;\r\n      });\r\n      base.push(formatDate(e.salaryDate));\r\n      return base;\r\n    });\r\n\r\n    // Append total row\r\n    const netColIndex = visibleColumns.findIndex(c => c.key === 'netSalary');\r\n    const totalRow = new Array(visibleColumns.length).fill('');\r\n    totalRow[0] = 'Total Net Salary';\r\n    if (netColIndex >= 0) totalRow[netColIndex] = netSalaryTotal.toFixed(2);\r\n    rows.push(totalRow);\r\n\r\n    const csv = [headersFull, ...rows]\r\n      .map(r => r.map(v => `\"${(v ?? '').toString().replace(/\"/g, '\"\"')}\"`).join(','))\r\n      .join('\\r\\n');\r\n\r\n    const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });\r\n    const url = URL.createObjectURL(blob);\r\n    const a = document.createElement('a');\r\n    a.href = url;\r\n    a.download = `employees_${new Date().toISOString().slice(0, 10)}.csv`;\r\n    a.click();\r\n    URL.revokeObjectURL(url);\r\n  };\r\n\r\n  // XLSX download (uses visible rows/columns)\r\n  const downloadXlsx = async () => {\r\n    const XLSX = await import('xlsx');\r\n    const rows = visibleEmployees.map(e => {\r\n      const obj = {};\r\n      visibleColumns.forEach(c => {\r\n        obj[c.label] = c.key === 'salaryDate'\r\n          ? formatDate(e[c.key])\r\n          : c.key === 'professionalTax'\r\n            ? formatProfessionalTax(e[c.key])\r\n            : (c.key === 'netSalary' || c.key === 'totalDeduction')\r\n              ? formatInt(e[c.key])\r\n            : e[c.key];\r\n      });\r\n      obj['Salary Date'] = formatDate(e.salaryDate);\r\n      return obj;\r\n    });\r\n\r\n    // Append total row\r\n    const netCol = visibleColumns.find(c => c.key === 'netSalary');\r\n    const firstColLabel = visibleColumns[0]?.label ?? 'Info';\r\n    const totalRow = {\r\n      [firstColLabel]: 'Total Net Salary',\r\n      ...(netCol ? { [netCol.label]: Number(netSalaryTotal.toFixed(2)) } : {})\r\n    };\r\n    rows.push(totalRow);\r\n\r\n    const ws = XLSX.utils.json_to_sheet(rows);\r\n    const wb = XLSX.utils.book_new();\r\n    XLSX.utils.book_append_sheet(wb, ws, 'Employees');\r\n    XLSX.writeFile(wb, `employees_${new Date().toISOString().slice(0,10)}.xlsx`);\r\n  };\r\n\r\n  // In EmployeeList component JSX (near the top actions area)\r\n  return (\r\n    <>\r\n      <div>\r\n        <div className=\"actions-bar no-print\">\r\n          <Link to=\"/add\" className=\"btn btn-primary btn-rounded\">Add Salary Details</Link>\r\n          <button type=\"button\" onClick={downloadXlsx} className=\"btn btn-secondary btn-rounded\">\r\n            Download Excel\r\n          </button>\r\n          <button type=\"button\" onClick={() => window.print()} className=\"btn btn-outline-secondary btn-rounded\">\r\n            Print\r\n          </button>\r\n          \r\n          {/* Month/Year Filter */}\r\n          <div style={{ display: 'flex', gap: 8, alignItems: 'center', marginLeft: 'auto' }}>\r\n            <select \r\n                className=\"form-select\" \r\n                style={{ width: 'auto', display: 'inline-block', padding: '6px 12px', fontSize: '14px' }}\r\n                value={selectedMonth} \r\n                onChange={handleMonthChange}\r\n            >\r\n                {monthNames.map((m, i) => <option key={i} value={i+1}>{m}</option>)}\r\n            </select>\r\n            <select \r\n                className=\"form-select\" \r\n                style={{ width: 'auto', display: 'inline-block', padding: '6px 12px', fontSize: '14px' }}\r\n                value={selectedYear} \r\n                onChange={handleYearChange}\r\n            >\r\n                {years.map(y => <option key={y} value={y}>{y}</option>)}\r\n            </select>\r\n          </div>\r\n\r\n          {(() => {\r\n            const role = localStorage.getItem('role') || '';\r\n            return (\r\n              <>\r\n                <button type=\"button\" onClick={bulkSubmit} className=\"btn btn-outline-primary btn-rounded\">\r\n                  Submit\r\n                </button>\r\n                {role === 'ADMIN' && (\r\n                  <button type=\"button\" onClick={bulkApprove} className=\"btn btn-success btn-rounded\" style={{ marginLeft: 8 }}>\r\n                    Approve\r\n                  </button>\r\n                )}\r\n              </>\r\n            );\r\n          })()}\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"table-container\">\r\n        <table className=\"table table-striped table-bordered salary-table\">\r\n          <thead className=\"table-dark\">\r\n            <tr>\r\n              <th className=\"no-print\">Actions</th>\r\n              {visibleColumns.map(col => (\r\n                <th key={col.key}>{col.label}</th>\r\n              ))}\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n              {visibleEmployees.length > 0 ? (\r\n                visibleEmployees.map(employee => (\r\n                  <tr key={employee.id}>\r\n                    <td className=\"no-print\">\r\n                      {(() => {\r\n                        const role = localStorage.getItem('role') || '';\r\n                        const isApproved = String(employee.status || '').toUpperCase() === 'APPROVED';\r\n                        const isSubmitted = String(employee.status || '').toUpperCase() === 'SUBMITTED';\r\n                        const disableActions = role === 'EMPLOYEE' && isApproved;\r\n                        return (\r\n                          <div className=\"btn-group\">\r\n                            <Link\r\n                              to={`/edit/${employee.id}`}\r\n                              className={`btn btn-sm ${disableActions ? 'btn-secondary' : 'btn-warning'} me-1`}\r\n                              aria-disabled={disableActions}\r\n                              onClick={(e) => { if (disableActions) e.preventDefault(); }}\r\n                            >\r\n                              Edit\r\n                            </Link>\r\n                            <button\r\n                              onClick={() => !disableActions && handleDelete(employee.id)}\r\n                              className={`btn btn-sm ${disableActions ? 'btn-secondary' : 'btn-danger'}`}\r\n                              disabled={disableActions}\r\n                            >\r\n                              Delete\r\n                            </button>\r\n                          </div>\r\n                        );\r\n                      })()}\r\n                    </td>\r\n                    {visibleColumns.map(col => (\r\n                      <td key={col.key}>\r\n                        {col.key === 'salaryDate'\r\n                          ? formatDate(employee[col.key])\r\n                          : col.key === 'professionalTax'\r\n                            ? formatProfessionalTax(employee[col.key])\r\n                            : (col.key === 'netSalary' || col.key === 'totalDeduction')\r\n                              ? formatInt(employee[col.key])\r\n                            : (employee[col.key] ?? '')}\r\n                      </td>\r\n                    ))}\r\n                  </tr>\r\n                ))\r\n            ) : (\r\n              <tr>\r\n                <td colSpan={visibleColumns.length + 1} className=\"text-center\">No employees found</td>\r\n              </tr>\r\n            )}\r\n          </tbody>\r\n          <tfoot>\r\n            <tr>\r\n              <td className=\"no-print\"></td>\r\n              {visibleColumns.map((col) => (\r\n                <td key={col.key}>\r\n                  {col.key === 'netSalary' ? Math.round(netSalaryTotal) : ''}\r\n                </td>\r\n              ))}\r\n            </tr>\r\n          </tfoot>\r\n        </table>\r\n      </div>\r\n      \r\n      {/* Pagination Controls */}\r\n      <div className=\"d-flex justify-content-between align-items-center mt-3 no-print\">\r\n          <div>\r\n              Page {page + 1} of {totalPages || 1}\r\n          </div>\r\n          <div>\r\n              <button \r\n                className=\"btn btn-secondary me-2\" \r\n                disabled={page === 0} \r\n                onClick={() => setPage(p => Math.max(0, p - 1))}\r\n              >\r\n                Previous\r\n              </button>\r\n              <button \r\n                className=\"btn btn-secondary\" \r\n                disabled={page >= (totalPages || 1) - 1} \r\n                onClick={() => setPage(p => p + 1)}\r\n              >\r\n                Next\r\n              </button>\r\n          </div>\r\n      </div>\r\n    </>\r\n  );\r\n}; // <-- end of component\r\n\r\nexport default EmployeeList;\r\n"],"names":["employees","setEmployees","useState","loading","setLoading","error","setError","now","Date","currentYear","getFullYear","years","Array","from","length","_","i","selectedMonth","setSelectedMonth","getMonth","selectedYear","setSelectedYear","page","setPage","size","setSize","totalPages","setTotalPages","useEffect","fetchEmployees","async","response","axios","get","concat","data","content","err","console","bulkSubmit","role","localStorage","getItem","alert","targets","visibleEmployees","filter","e","s","String","status","toUpperCase","Promise","all","map","post","id","_err$response3","_err$response3$data","message","bulkApprove","_err$response4","_err$response4$data","_jsx","className","children","formatDate","d","isNaN","getTime","dd","getDate","padStart","mm","yyyy","allColumns","key","label","some","col","isNonEmpty","val","undefined","trim","visibleColumns","toNumber","replace","n","Number","isFinite","formatProfessionalTax","Math","round","formatInt","netSalaryTotal","reduce","sum","emp","netSalary","_jsxs","_Fragment","Link","to","type","onClick","_visibleColumns$0$lab","_visibleColumns$","XLSX","rows","obj","forEach","c","salaryDate","netCol","find","firstColLabel","totalRow","_objectSpread","toFixed","push","ws","utils","json_to_sheet","wb","book_new","book_append_sheet","writeFile","toISOString","slice","window","print","style","display","gap","alignItems","marginLeft","width","padding","fontSize","value","onChange","target","m","y","employee","isApproved","disableActions","preventDefault","confirm","delete","handleDelete","disabled","_employee$col$key","colSpan","p","max"],"sourceRoot":""}