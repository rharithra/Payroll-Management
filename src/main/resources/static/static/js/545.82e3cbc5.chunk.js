"use strict";(self.webpackChunksalary_management_frontend=self.webpackChunksalary_management_frontend||[]).push([[545],{8545:(e,a,t)=>{t.r(a),t.d(a,{default:()=>o});var n=t(9379),s=t(5043),l=t(9722),r=t(3216),i=t(579);const o=function(){const[e,a]=(0,s.useState)(""),[t,o]=(0,s.useState)(""),[c,d]=(0,s.useState)(""),[m,p]=(0,s.useState)(null),[u,h]=(0,s.useState)(!1),y=(0,r.Zp)(),[v,g]=(0,s.useState)({name:"",employeeId:"",designation:"",basicSalary:"",joinDate:""}),[j,x]=(0,s.useState)([]),{id:b}=(0,r.g)(),f=Boolean(b),S=["January","February","March","April","May","June","July","August","September","October","November","December"],D=new Date,I=D.getFullYear(),C=Array.from({length:I-2e3+1},(e,a)=>2e3+a);return(0,s.useEffect)(()=>{l.A.get("/api/employee-masters").then(e=>x(e.data||[])).catch(()=>x([]))},[]),(0,s.useEffect)(()=>{f&&l.A.get("/api/employee-masters/".concat(b)).then(e=>{var t;const s=e.data||{};a(s.name||""),o(s.designation||""),d(null!==(t=s.basicSalary)&&void 0!==t?t:""),g(e=>(0,n.A)((0,n.A)({},e),{},{employeeId:s.employeeId||"",joinDate:s.joinDate||""}))}).catch(()=>{})},[b,f]),(0,i.jsx)("div",{className:"page employee-master",children:(0,i.jsx)("div",{className:"panel",children:(0,i.jsxs)("form",{onSubmit:async a=>{a.preventDefault(),h(!0),p(null);const n=(v.employeeId||"").trim();if(!n)return p("Employee ID is required"),void h(!1);if(!f){if(j.some(e=>String(e.employeeId).trim().toLowerCase()===n.toLowerCase()))return p("Employee ID must be unique"),void h(!1)}try{const a={name:e,designation:t,employeeId:n,basicSalary:""===c?null:parseFloat(c),joinDate:v.joinDate};f?await l.A.put("/api/employee-masters/".concat(b),a,{headers:{"Content-Type":"application/json"}}):await l.A.post("/api/employee-masters",a,{headers:{"Content-Type":"application/json"}}),y("/masters")}catch(i){var s,r;p((null===i||void 0===i||null===(s=i.response)||void 0===s||null===(r=s.data)||void 0===r?void 0:r.message)||i.message)}finally{h(!1)}},children:[(0,i.jsxs)("div",{className:"form-grid",children:[(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"form-item",children:[(0,i.jsx)("label",{children:"Employee Name"}),(0,i.jsx)("input",{type:"text",value:e,onChange:e=>a(e.target.value),placeholder:"Name"})]}),(0,i.jsxs)("div",{className:"form-item",children:[(0,i.jsx)("label",{children:"Employee ID"}),(0,i.jsx)("input",{type:"text",name:"employeeId",value:v.employeeId,onChange:e=>{const{name:a,value:t}=e.target;g(e=>(0,n.A)((0,n.A)({},e),{},{[a]:t}))},required:!0})]}),(0,i.jsxs)("div",{className:"form-item",children:[(0,i.jsx)("label",{children:"Designation"}),(0,i.jsx)("input",{type:"text",value:t,onChange:e=>o(e.target.value),placeholder:"Designation"})]}),(0,i.jsxs)("div",{className:"form-item",children:[(0,i.jsx)("label",{children:"Total Salary"}),(0,i.jsx)("input",{type:"number",value:c,onChange:e=>d(e.target.value),placeholder:"Total"})]}),(0,i.jsxs)("div",{className:"form-item",children:[(0,i.jsx)("label",{children:"Date of Joining"}),(()=>{const e=(v.joinDate||"").split("-"),a=e[0]?parseInt(e[0],10):I,t=e[1]?parseInt(e[1],10):D.getMonth()+1,s=e[2]?parseInt(e[2],10):D.getDate(),l=(e,a)=>new Date(e,a,0).getDate(),r=l(a,t),o=Math.min(s,r),c=Array.from({length:r},(e,a)=>a+1),d=(e,a,t)=>{const s=Math.max(1,Math.min(12,a)),r=Math.min(l(e,s),Math.max(1,t));g(a=>(0,n.A)((0,n.A)({},a),{},{joinDate:"".concat(String(e),"-").concat(String(s).padStart(2,"0"),"-").concat(String(r).padStart(2,"0"))}))};return(0,i.jsxs)("div",{style:{display:"flex",gap:8},children:[(0,i.jsx)("select",{value:o,onChange:e=>d(a,t,parseInt(e.target.value,10)),children:c.map(e=>(0,i.jsx)("option",{value:e,children:String(e).padStart(2,"0")},e))}),(0,i.jsx)("select",{value:t,onChange:e=>d(a,parseInt(e.target.value,10),o),children:S.map((e,a)=>(0,i.jsx)("option",{value:a+1,children:e},e))}),(0,i.jsx)("select",{value:a,onChange:e=>d(parseInt(e.target.value,10),t,o),children:C.map(e=>(0,i.jsx)("option",{value:e,children:e},e))})]})})()]})]}),(0,i.jsx)("div",{})]}),(0,i.jsxs)("div",{className:"btn-container btn-center",children:[(0,i.jsx)("button",{type:"submit",disabled:u,className:"btn btn-primary btn-rounded",children:"Save"}),(0,i.jsx)("button",{type:"button",className:"btn btn-secondary btn-rounded",onClick:()=>y(-1),children:"Cancel"})]}),m&&(0,i.jsx)("div",{style:{color:"red"},children:m})]})})})}}}]);
//# sourceMappingURL=545.82e3cbc5.chunk.js.map