{"version":3,"file":"static/js/545.82e3cbc5.chunk.js","mappings":"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","sources":["components/EmployeeMasterForm.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\nimport { useNavigate, useParams } from 'react-router-dom';\r\n\r\nfunction EmployeeMasterForm() {\r\n  const [name, setName] = useState('');\r\n  const [designation, setDesignation] = useState('');        // NEW\r\n  const [basicSalary, setBasicSalary] = useState('');\r\n  const [error, setError] = useState(null);\r\n  const [saving, setSaving] = useState(false);\r\n  const navigate = useNavigate();\r\n  const [formData, setFormData] = useState({\r\n    name: '',\r\n    employeeId: '',\r\n    designation: '',\r\n    basicSalary: '',\r\n    joinDate: ''\r\n  });\r\n  const [masters, setMasters] = useState([]); // NEW: existing IDs for uniqueness check\r\n  const { id } = useParams();\r\n  const isEdit = Boolean(id);\r\n  const monthNames = ['January','February','March','April','May','June','July','August','September','October','November','December'];\r\n  const now = new Date();\r\n  const currentYear = now.getFullYear();\r\n  const years = Array.from({ length: (currentYear - 2000 + 1) }, (_, i) => 2000 + i);\r\n\r\n  useEffect(() => {\r\n    axios.get('/api/employee-masters')\r\n      .then(res => setMasters(res.data || []))\r\n      .catch(() => setMasters([]));\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (isEdit) {\r\n      axios.get(`/api/employee-masters/${id}`)\r\n        .then(res => {\r\n          const m = res.data || {};\r\n          setName(m.name || '');\r\n          setDesignation(m.designation || '');\r\n          setBasicSalary(m.basicSalary ?? '');\r\n          setFormData(prev => ({\r\n            ...prev,\r\n            employeeId: m.employeeId || '',\r\n            joinDate: m.joinDate || ''\r\n          }));\r\n        })\r\n        .catch(() => {});\r\n    }\r\n  }, [id, isEdit]);\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setFormData(prev => ({ ...prev, [name]: value }));\r\n  };\r\n\r\n  const save = async (e) => {\r\n    e.preventDefault();\r\n    setSaving(true);\r\n    setError(null);\r\n\r\n    const newId = (formData.employeeId || '').trim();\r\n    if (!newId) {\r\n      setError('Employee ID is required');\r\n      setSaving(false);\r\n      return;\r\n    }\r\n    // Uniqueness check (case-insensitive)\r\n    if (!isEdit) {\r\n      const exists = masters.some(m => String(m.employeeId).trim().toLowerCase() === newId.toLowerCase());\r\n      if (exists) {\r\n        setError('Employee ID must be unique');\r\n        setSaving(false);\r\n        return;\r\n      }\r\n    }\r\n\r\n    try {\r\n      const payload = {\r\n        name,\r\n        designation,\r\n        employeeId: newId,\r\n        basicSalary: basicSalary === '' ? null : parseFloat(basicSalary),\r\n        joinDate: formData.joinDate\r\n      };\r\n      if (isEdit) {\r\n        await axios.put(`/api/employee-masters/${id}`, payload, { headers: { 'Content-Type': 'application/json' } });\r\n      } else {\r\n        await axios.post('/api/employee-masters', payload, { headers: { 'Content-Type': 'application/json' } });\r\n      }\r\n      navigate('/masters');\r\n    } catch (err) {\r\n      setError(err?.response?.data?.message || err.message);\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"page employee-master\">\r\n      <div className=\"panel\">\r\n        <form onSubmit={save}>\r\n          <div className=\"form-grid\">\r\n            <div>\r\n              <div className=\"form-item\">\r\n                <label>Employee Name</label>\r\n                <input type=\"text\" value={name} onChange={e => setName(e.target.value)} placeholder=\"Name\" />\r\n              </div>\r\n              <div className=\"form-item\">\r\n                <label>Employee ID</label>\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"employeeId\"\r\n                  value={formData.employeeId}\r\n                  onChange={handleChange}\r\n                  required\r\n                />\r\n              </div>\r\n              <div className=\"form-item\">\r\n                <label>Designation</label>\r\n                <input type=\"text\" value={designation} onChange={e => setDesignation(e.target.value)} placeholder=\"Designation\" />\r\n              </div>\r\n              <div className=\"form-item\">\r\n                <label>Total Salary</label>\r\n                <input type=\"number\" value={basicSalary} onChange={e => setBasicSalary(e.target.value)} placeholder=\"Total\" />\r\n              </div>\r\n              <div className=\"form-item\">\r\n                <label>Date of Joining</label>\r\n                {(() => {\r\n                  const parts = (formData.joinDate || '').split('-');\r\n                  const jy = parts[0] ? parseInt(parts[0], 10) : currentYear;\r\n                  const jm = parts[1] ? parseInt(parts[1], 10) : (now.getMonth() + 1);\r\n                  const jd = parts[2] ? parseInt(parts[2], 10) : now.getDate();\r\n                  const dim = (y, m) => new Date(y, m, 0).getDate(); // m=1-12\r\n                  const maxDay = dim(jy, jm);\r\n                  const safeDay = Math.min(jd, maxDay);\r\n                  const days = Array.from({ length: maxDay }, (_, i) => i + 1);\r\n                  const update = (y, m, d) => {\r\n                    const mClamped = Math.max(1, Math.min(12, m));\r\n                    const dClamped = Math.min(dim(y, mClamped), Math.max(1, d));\r\n                    setFormData(prev => ({\r\n                      ...prev,\r\n                      joinDate: `${String(y)}-${String(mClamped).padStart(2,'0')}-${String(dClamped).padStart(2,'0')}`\r\n                    }));\r\n                  };\r\n                  return (\r\n                    <div style={{ display: 'flex', gap: 8 }}>\r\n                      <select value={safeDay} onChange={(e) => update(jy, jm, parseInt(e.target.value, 10))}>\r\n                        {days.map(d => (\r\n                          <option key={d} value={d}>{String(d).padStart(2,'0')}</option>\r\n                        ))}\r\n                      </select>\r\n                      <select value={jm} onChange={(e) => update(jy, parseInt(e.target.value, 10), safeDay)}>\r\n                        {monthNames.map((n, idx) => (\r\n                          <option key={n} value={idx+1}>{n}</option>\r\n                        ))}\r\n                      </select>\r\n                      <select value={jy} onChange={(e) => update(parseInt(e.target.value, 10), jm, safeDay)}>\r\n                        {years.map(y => (\r\n                          <option key={y} value={y}>{y}</option>\r\n                        ))}\r\n                      </select>\r\n                    </div>\r\n                  );\r\n                })()}\r\n              </div>\r\n            </div>\r\n            <div></div>\r\n          </div>\r\n          <div className=\"btn-container btn-center\">\r\n            <button type=\"submit\" disabled={saving} className=\"btn btn-primary btn-rounded\">Save</button>\r\n            <button\r\n              type=\"button\"\r\n              className=\"btn btn-secondary btn-rounded\"\r\n              onClick={() => navigate(-1)}\r\n            >\r\n              Cancel\r\n            </button>\r\n          </div>\r\n          {error && <div style={{ color: 'red' }}>{error}</div>}\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\nexport default EmployeeMasterForm;\r\n"],"names":["name","setName","useState","designation","setDesignation","basicSalary","setBasicSalary","error","setError","saving","setSaving","navigate","useNavigate","formData","setFormData","employeeId","joinDate","masters","setMasters","id","useParams","isEdit","Boolean","monthNames","now","Date","currentYear","getFullYear","years","Array","from","length","_","i","useEffect","axios","get","then","res","data","catch","concat","_m$basicSalary","m","prev","_objectSpread","_jsx","className","children","_jsxs","onSubmit","async","e","preventDefault","newId","trim","some","String","toLowerCase","payload","parseFloat","put","headers","post","err","_err$response","_err$response$data","response","message","type","value","onChange","target","placeholder","required","parts","split","jy","parseInt","jm","getMonth","jd","getDate","dim","y","maxDay","safeDay","Math","min","days","update","d","mClamped","max","dClamped","padStart","style","display","gap","map","n","idx","disabled","onClick","color"],"sourceRoot":""}